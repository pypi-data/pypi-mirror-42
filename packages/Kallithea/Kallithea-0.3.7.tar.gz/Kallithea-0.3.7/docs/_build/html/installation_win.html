
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installation and upgrade on Windows (7/Server 2008 R2 and newer) &#8212; Kallithea 0.3.7 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation and upgrade on Windows (XP/Vista/Server 2003/Server 2008)" href="installation_win_old.html" />
    <link rel="prev" title="Installation on Unix/Linux" href="installation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_win_old.html" title="Installation and upgrade on Windows (XP/Vista/Server 2003/Server 2008)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation on Unix/Linux"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-and-upgrade-on-windows-7-server-2008-r2-and-newer">
<span id="installation-win"></span><h1>Installation and upgrade on Windows (7/Server 2008 R2 and newer)<a class="headerlink" href="#installation-and-upgrade-on-windows-7-server-2008-r2-and-newer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="first-time-install">
<h2>First time install<a class="headerlink" href="#first-time-install" title="Permalink to this headline">¶</a></h2>
<p>Target OS: Windows 7 and newer or Windows Server 2008 R2 and newer</p>
<p>Tested on Windows 8.1, Windows Server 2008 R2 and Windows Server 2012</p>
<p>To install on an older version of Windows, see <a class="reference external" href="installation_win_old.html">installation_win_old.html</a></p>
<div class="section" id="step-1-install-python">
<h3>Step 1 – Install Python<a class="headerlink" href="#step-1-install-python" title="Permalink to this headline">¶</a></h3>
<p>Install Python 2.x.y (x = 6 or 7). Latest version is recommended. If you need another version, they can run side by side.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Python 3.x is not supported.</p>
</div>
<ul class="simple">
<li>Download Python 2.x.y from <a class="reference external" href="http://www.python.org/download/">http://www.python.org/download/</a></li>
<li>Choose and click on the version</li>
<li>Click on “Windows X86-64 Installer” for x64 or “Windows x86 MSI installer” for Win32.</li>
<li>Disable UAC or run the installer with admin privileges. If you chose to disable UAC, do not forget to reboot afterwards.</li>
</ul>
<p>While writing this guide, the latest version was v2.7.9.
Remember the specific major and minor versions installed, because they will
be needed in the next step. In this case, it is “2.7”.</p>
</div>
<div class="section" id="step-2-python-bin">
<h3>Step 2 – Python BIN<a class="headerlink" href="#step-2-python-bin" title="Permalink to this headline">¶</a></h3>
<p>Add Python BIN folder to the path. This can be done manually (editing
“PATH” environment variable) or by using Windows Support Tools that
come pre-installed in Windows Vista/7 and later.</p>
<p>Open a CMD and type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SETX PATH &quot;%PATH%;[your-python-path]&quot; /M
</pre></div>
</div>
<p>Please substitute [your-python-path] with your Python installation
path. Typically this is <code class="docutils literal notranslate"><span class="pre">C:\\Python27</span></code>.</p>
</div>
<div class="section" id="step-3-install-pywin32-extensions">
<h3>Step 3 – Install pywin32 extensions<a class="headerlink" href="#step-3-install-pywin32-extensions" title="Permalink to this headline">¶</a></h3>
<p>Download pywin32 from:
<a class="reference external" href="http://sourceforge.net/projects/pywin32/files/">http://sourceforge.net/projects/pywin32/files/</a></p>
<ul class="simple">
<li>Click on “pywin32” folder</li>
<li>Click on the first folder (in this case, Build 219, maybe newer when you try)</li>
<li>Choose the file ending with “.amd64-py2.x.exe” (“.win32-py2.x.exe”
for Win32) where x is the minor version of Python you installed.
When writing this guide, the file was:
<a class="reference external" href="http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.win-amd64-py2.7.exe/download">http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.win-amd64-py2.7.exe/download</a>
(x64)
<a class="reference external" href="http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.win32-py2.7.exe/download">http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.win32-py2.7.exe/download</a>
(Win32)</li>
</ul>
</div>
<div class="section" id="step-4-install-pip">
<h3>Step 4 – Install pip<a class="headerlink" href="#step-4-install-pip" title="Permalink to this headline">¶</a></h3>
<p>pip is a package management system for Python. You will need it to install Kallithea and its dependencies.</p>
<p>If you installed Python 2.7.9+, you already have it (as long as you ran the installer with admin privileges or disabled UAC).</p>
<p>If it was not installed or if you are using Python&gt;=2.6,&lt;2.7.9:</p>
<ul class="simple">
<li>Go to <a class="reference external" href="https://bootstrap.pypa.io">https://bootstrap.pypa.io</a></li>
<li>Right-click on get-pip.py and choose Saves as…</li>
<li>Run “python2 get-pip.py” in the folder where you downloaded get-pip.py (may require admin access).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference external" href="http://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows">http://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows</a>
for details and alternative methods.</p>
</div>
<p>Note that pip.exe will be placed inside your Python installation’s
Scripts folder, which is likely not on your path. To correct this,
open a CMD and type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SETX PATH &quot;%PATH%;[your-python-path]\Scripts&quot; /M
</pre></div>
</div>
</div>
<div class="section" id="step-5-kallithea-folder-structure">
<h3>Step 5 – Kallithea folder structure<a class="headerlink" href="#step-5-kallithea-folder-structure" title="Permalink to this headline">¶</a></h3>
<p>Create a Kallithea folder structure.</p>
<p>This is only an example to install Kallithea. Of course, you can
change it. However, this guide will follow the proposed structure, so
please later adapt the paths if you change them. Folders without
spaces are recommended.</p>
<p>Create the following folder structure:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Kallithea
C:\Kallithea\Bin
C:\Kallithea\Env
C:\Kallithea\Repos
</pre></div>
</div>
</div>
<div class="section" id="step-6-install-virtualenv">
<h3>Step 6 – Install virtualenv<a class="headerlink" href="#step-6-install-virtualenv" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A python virtual environment will allow for isolation between the Python packages of your system and those used for Kallithea.
It is strongly recommended to use it to ensure that Kallithea does not change a dependency that other software uses or vice versa.</p>
</div>
<p>In a command prompt type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install virtualenv
</pre></div>
</div>
<p>Virtualenv will now be inside your Python Scripts path (C:\Python27\Scripts or similar).</p>
<p>To create a virtual environment, run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>virtualenv C:\Kallithea\Env
</pre></div>
</div>
</div>
<div class="section" id="step-7-install-kallithea">
<h3>Step 7 – Install Kallithea<a class="headerlink" href="#step-7-install-kallithea" title="Permalink to this headline">¶</a></h3>
<p>In order to install Kallithea, you need to be able to run “pip install kallithea”. It will use pip to install the Kallithea Python package and its dependencies.
Some Python packages use managed code and need to be compiled.
This can be done on Linux without any special steps. On Windows, you will need to install Microsoft Visual C++ compiler for Python 2.7.</p>
<p>Download and install “Microsoft Visual C++ Compiler for Python 2.7” from <a class="reference external" href="http://aka.ms/vcpython27">http://aka.ms/vcpython27</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also install the dependencies using already compiled Windows binaries packages. A good source of compiled Python packages is <a class="reference external" href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a>. However, not all of the necessary packages for Kallithea are on this site and some are hard to find, so we will stick with using the compiler.</p>
</div>
<p>In a command prompt type (adapting paths if necessary):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd C:\Kallithea\Env\Scripts
activate
pip install --upgrade pip &quot;setuptools&lt;34&quot;
</pre></div>
</div>
<p>The prompt will change into “(Env) C:\Kallithea\Env\Scripts” or similar
(depending of your folder structure). Then type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install kallithea
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This will take some time. Please wait patiently until it is fully
complete. Some warnings will appear. Don’t worry, they are
normal.</p>
</div>
</div>
<div class="section" id="step-8-install-git-optional">
<h3>Step 8 – Install git (optional)<a class="headerlink" href="#step-8-install-git-optional" title="Permalink to this headline">¶</a></h3>
<p>Mercurial being a python package, it was installed automatically when doing “pip install kallithea”.</p>
<p>You need to install git manually if you want Kallithea to be able to host git repositories.</p>
<p>See <a class="reference external" href="http://git-scm.com/book/en/v2/Getting-Started-Installing-Git#Installing-on-Windows">http://git-scm.com/book/en/v2/Getting-Started-Installing-Git#Installing-on-Windows</a> for instructions.</p>
</div>
<div class="section" id="step-9-configuring-kallithea">
<h3>Step 9 – Configuring Kallithea<a class="headerlink" href="#step-9-configuring-kallithea" title="Permalink to this headline">¶</a></h3>
<p>Steps taken from <a class="reference external" href="setup.html">setup.html</a></p>
<p>You have to use the same command prompt as in Step 7, so if you closed
it, reopen it following the same commands (including the “activate”
one). When ready, type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd C:\Kallithea\Bin
paster make-config Kallithea production.ini
</pre></div>
</div>
<p>Then you must edit production.ini to fit your needs (IP address, IP
port, mail settings, database, etc.). <a class="reference external" href="http://notepad-plus-plus.org/">NotePad++</a> or a similar text
editor is recommended to properly handle the newline character
differences between Unix and Windows.</p>
<p>For the sake of simplicity, run it with the default settings. After your edits (if any) in the previous command prompt, type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster setup-db production.ini
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This time a <em>new</em> database will be installed. You must
follow a different step to later <em>upgrade</em> to a newer
Kallithea version)</p>
</div>
<p>The script will ask you for confirmation about creating a new database, answer yes (y)</p>
<p>The script will ask you for the repository path, answer C:\Kallithea\Repos (or similar).</p>
<p>The script will ask you for the admin username and password, answer “admin” + “123456” (or whatever you want)</p>
<p>The script will ask you for admin mail, answer “<a class="reference external" href="mailto:admin&#37;&#52;&#48;xxxx&#46;com">admin<span>&#64;</span>xxxx<span>&#46;</span>com</a>” (or whatever you want).</p>
<p>If you make a mistake and the script doesn’t end, don’t worry: start it again.</p>
<p>If you decided not to install git, you will get errors about it that you can ignore.</p>
</div>
<div class="section" id="step-10-running-kallithea">
<h3>Step 10 – Running Kallithea<a class="headerlink" href="#step-10-running-kallithea" title="Permalink to this headline">¶</a></h3>
<p>In the previous command prompt, being in the C:\Kallithea\Bin folder, type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster serve production.ini
</pre></div>
</div>
<p>Open your web server, and go to <a class="reference external" href="http://127.0.0.1:5000">http://127.0.0.1:5000</a></p>
<p>It works!! :-)</p>
<p>Remark:
If it does not work the first time, Ctrl-C the CMD process and start it again. Don’t forget the “<a class="reference external" href="http://">http://</a>” in Internet Explorer.</p>
<p>What this guide does not cover:</p>
<ul class="simple">
<li>Installing Celery</li>
<li>Running Kallithea as a Windows Service. You can investigate here:<ul>
<li><a class="reference external" href="http://pypi.python.org/pypi/wsgisvc">http://pypi.python.org/pypi/wsgisvc</a></li>
<li><a class="reference external" href="http://ryrobes.com/python/running-python-scripts-as-a-windows-service/">http://ryrobes.com/python/running-python-scripts-as-a-windows-service/</a></li>
<li><a class="reference external" href="http://wiki.pylonshq.com/display/pylonscookbook/How+to+run+Pylons+as+a+Windows+service">http://wiki.pylonshq.com/display/pylonscookbook/How+to+run+Pylons+as+a+Windows+service</a></li>
</ul>
</li>
<li>Using Apache. You can investigate here:<ul>
<li><a class="reference external" href="https://groups.google.com/group/rhodecode/msg/c433074e813ffdc4">https://groups.google.com/group/rhodecode/msg/c433074e813ffdc4</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<p>Stop running Kallithea
Open a CommandPrompt like in Step 7 (cd to C:KallitheaEnvScripts and activate) and type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install kallithea --upgrade
cd \Kallithea\Bin
</pre></div>
</div>
<p>Backup your production.ini file now.</p>
<p>Then run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster make-config Kallithea production.ini
</pre></div>
</div>
<p>Look for changes and update your production.ini accordingly.</p>
<p>Next, update the database:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster upgrade-db production.ini
</pre></div>
</div>
<p>More details can be found in <a class="reference external" href="upgrade.html">upgrade.html</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div style="text-align:center;margin:30px 0;">
  <img src="_static/kallithea-logo.svg" width="200px"/>
</div>
<h3>Support Kallithea development</h3>
<div style="text-align:center">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="EYXFS3SQPHYUL">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal &ndash; The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
    <div style="padding:5px">
     <a href="https://flattr.com/thing/922714/Donate-to-Software-Freedom-Conservancy" target="_blank">
     <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a>
    </div>
</div>

  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation and upgrade on Windows (7/Server 2008 R2 and newer)</a><ul>
<li><a class="reference internal" href="#first-time-install">First time install</a><ul>
<li><a class="reference internal" href="#step-1-install-python">Step 1 – Install Python</a></li>
<li><a class="reference internal" href="#step-2-python-bin">Step 2 – Python BIN</a></li>
<li><a class="reference internal" href="#step-3-install-pywin32-extensions">Step 3 – Install pywin32 extensions</a></li>
<li><a class="reference internal" href="#step-4-install-pip">Step 4 – Install pip</a></li>
<li><a class="reference internal" href="#step-5-kallithea-folder-structure">Step 5 – Kallithea folder structure</a></li>
<li><a class="reference internal" href="#step-6-install-virtualenv">Step 6 – Install virtualenv</a></li>
<li><a class="reference internal" href="#step-7-install-kallithea">Step 7 – Install Kallithea</a></li>
<li><a class="reference internal" href="#step-8-install-git-optional">Step 8 – Install git (optional)</a></li>
<li><a class="reference internal" href="#step-9-configuring-kallithea">Step 9 – Configuring Kallithea</a></li>
<li><a class="reference internal" href="#step-10-running-kallithea">Step 10 – Running Kallithea</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading">Upgrading</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation on Unix/Linux</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation_win_old.html"
                        title="next chapter">Installation and upgrade on Windows (XP/Vista/Server 2003/Server 2008)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation_win.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_win_old.html" title="Installation and upgrade on Windows (XP/Vista/Server 2003/Server 2008)"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation on Unix/Linux"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2016 by various authors, licensed as GPLv3..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>