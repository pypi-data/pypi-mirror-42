
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>API &#8212; Kallithea 0.3.7 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The models module" href="models.html" />
    <link rel="prev" title="Changelog" href="../changelog.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="models.html" title="The models module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../changelog.html" title="Changelog"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api">
<span id="id1"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>Kallithea has a simple JSON RPC API with a single schema for calling all API
methods. Everything is available by sending JSON encoded http(s) requests to
<code class="docutils literal notranslate"><span class="pre">&lt;your_server&gt;/_admin/api</span></code>.</p>
<div class="section" id="api-access-for-web-views">
<h2>API access for web views<a class="headerlink" href="#api-access-for-web-views" title="Permalink to this headline">¶</a></h2>
<p>API access can also be turned on for each web view in Kallithea that is
decorated with the <code class="docutils literal notranslate"><span class="pre">&#64;LoginRequired</span></code> decorator. Some views use
<code class="docutils literal notranslate"><span class="pre">&#64;LoginRequired(api_access=True)</span></code> and are always available. By default only
RSS/Atom feed views are enabled. Other views are
only available if they have been whitelisted. Edit the
<code class="docutils literal notranslate"><span class="pre">api_access_controllers_whitelist</span></code> option in your .ini file and define views
that should have API access enabled.</p>
<p>For example, to enable API access to patch/diff, raw file and archive:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>api_access_controllers_whitelist =
    ChangesetController:changeset_patch,
    ChangesetController:changeset_raw,
    FilesController:raw,
    FilesController:archivefile
</pre></div>
</div>
<p>After this change, a Kallithea view can be accessed without login by adding a
GET parameter <code class="docutils literal notranslate"><span class="pre">?api_key=&lt;api_key&gt;</span></code> to the URL.</p>
<p>Exposing raw diffs is a good way to integrate with
third-party services like code review, or build farms that can download archives.</p>
</div>
<div class="section" id="api-access">
<h2>API access<a class="headerlink" href="#api-access" title="Permalink to this headline">¶</a></h2>
<p>Clients must send JSON encoded JSON-RPC requests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;id: &quot;&lt;id&gt;&quot;,
    &quot;api_key&quot;: &quot;&lt;api_key&gt;&quot;,
    &quot;method&quot;: &quot;&lt;method_name&gt;&quot;,
    &quot;args&quot;: {&quot;&lt;arg_key&gt;&quot;: &quot;&lt;arg_val&gt;&quot;}
}
</pre></div>
</div>
<p>For example, to pull to a local “CPython” mirror using curl:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>curl https://kallithea.example.com/_admin/api -X POST -H &#39;content-type:text/plain&#39; \
    --data-binary &#39;{&quot;id&quot;:1,&quot;api_key&quot;:&quot;xe7cdb2v278e4evbdf5vs04v832v0efvcbcve4a3&quot;,&quot;method&quot;:&quot;pull&quot;,&quot;args&quot;:{&quot;repo&quot;:&quot;CPython&quot;}}&#39;
</pre></div>
</div>
<dl class="docutils">
<dt>In general, provide</dt>
<dd><ul class="first last simple">
<li><em>id</em>, a value of any type, can be used to match the response with the request that it is replying to.</li>
<li><em>api_key</em>, for authentication and permission validation.</li>
<li><em>method</em>, the name of the method to call – a list of available methods can be found below.</li>
<li><em>args</em>, the arguments to pass to the method.</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">api_key can be found or set on the user account page.</p>
</div>
<p>The response to the JSON-RPC API call will always be a JSON structure:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;id&quot;: &lt;id&gt;,  # the id that was used in the request
    &quot;result&quot;: &lt;result&gt;|null,  # JSON formatted result (null on error)
    &quot;error&quot;: null|&lt;error_message&gt;  # JSON formatted error (null on success)
}
</pre></div>
</div>
<p>All responses from the API will be <code class="docutils literal notranslate"><span class="pre">HTTP/1.0</span> <span class="pre">200</span> <span class="pre">OK</span></code>. If an error occurs,
the reponse will have a failure description in <em>error</em> and
<em>result</em> will be null.</p>
</div>
<div class="section" id="api-client">
<h2>API client<a class="headerlink" href="#api-client" title="Permalink to this headline">¶</a></h2>
<p>Kallithea comes with a <code class="docutils literal notranslate"><span class="pre">kallithea-api</span></code> command line tool, providing a convenient
way to call the JSON-RPC API.</p>
<p>For example, to call <code class="docutils literal notranslate"><span class="pre">get_repo</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kallithea-api --apihost=&lt;Kallithea URL&gt; --apikey=&lt;API key&gt; get_repo

Calling method get_repo =&gt; &lt;Kallithea URL&gt;
Server response
ERROR:&quot;Missing non optional `repoid` arg in JSON DATA&quot;
</pre></div>
</div>
<p>Oops, looks like we forgot to add an argument. Let’s try again, now
providing the <code class="docutils literal notranslate"><span class="pre">repoid</span></code> as a parameter:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kallithea-api --apihost=&lt;Kallithea URL&gt; --apikey=&lt;API key&gt; get_repo repoid:myrepo

Calling method get_repo =&gt; &lt;Kallithea URL&gt;
Server response
{
    &quot;clone_uri&quot;: null,
    &quot;created_on&quot;: &quot;2015-08-31T14:55:19.042&quot;,
...
</pre></div>
</div>
<p>To avoid specifying <code class="docutils literal notranslate"><span class="pre">apihost</span></code> and <code class="docutils literal notranslate"><span class="pre">apikey</span></code> every time, run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kallithea-api --save-config --apihost=&lt;Kallithea URL&gt; --apikey=&lt;API key&gt;
</pre></div>
</div>
<p>This will create a <code class="docutils literal notranslate"><span class="pre">~/.config/kallithea</span></code> with the specified URL and API key
so you don’t have to specify them every time.</p>
</div>
<div class="section" id="api-methods">
<h2>API methods<a class="headerlink" href="#api-methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pull">
<h3>pull<a class="headerlink" href="#pull" title="Permalink to this headline">¶</a></h3>
<p>Pull the given repo from remote location. Can be used to automatically keep
remote repos up to date.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;pull&quot;
args :    {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : &quot;Pulled from `&lt;reponame&gt;`&quot;
error :  null
</pre></div>
</div>
</div>
<div class="section" id="rescan-repos">
<h3>rescan_repos<a class="headerlink" href="#rescan-repos" title="Permalink to this headline">¶</a></h3>
<p>Rescan repositories. If <code class="docutils literal notranslate"><span class="pre">remove_obsolete</span></code> is set,
Kallithea will delete repos that are in the database but not in the filesystem.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;rescan_repos&quot;
args :    {
            &quot;remove_obsolete&quot; : &quot;&lt;boolean = Optional(False)&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : &quot;{&#39;added&#39;: [&lt;list of names of added repos&gt;],
           &#39;removed&#39;: [&lt;list of names of removed repos&gt;]}&quot;
error :  null
</pre></div>
</div>
</div>
<div class="section" id="invalidate-cache">
<h3>invalidate_cache<a class="headerlink" href="#invalidate-cache" title="Permalink to this headline">¶</a></h3>
<p>Invalidate the cache for a repository.
This command can only be executed using the api_key of a user with admin rights,
or that of a regular user with admin or write access to the repository.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;invalidate_cache&quot;
args :    {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : &quot;Caches of repository `&lt;reponame&gt;`&quot;
error :  null
</pre></div>
</div>
</div>
<div class="section" id="lock">
<h3>lock<a class="headerlink" href="#lock" title="Permalink to this headline">¶</a></h3>
<p>Set the locking state on the given repository by the given user.
If the param <code class="docutils literal notranslate"><span class="pre">userid</span></code> is skipped, it is set to the ID of the user who is calling this method.
If param <code class="docutils literal notranslate"><span class="pre">locked</span></code> is skipped, the current lock state of the repository is returned.
This command can only be executed using the api_key of a user with admin rights, or that of a regular user with admin or write access to the repository.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;lock&quot;
args :    {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;userid&quot; : &quot;&lt;user_id or username = Optional(=apiuser)&gt;&quot;,
            &quot;locked&quot; : &quot;&lt;bool true|false = Optional(=None)&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : {
             &quot;repo&quot;: &quot;&lt;reponame&gt;&quot;,
             &quot;locked&quot;: &quot;&lt;bool true|false&gt;&quot;,
             &quot;locked_since&quot;: &quot;&lt;float lock_time&gt;&quot;,
             &quot;locked_by&quot;: &quot;&lt;username&gt;&quot;,
             &quot;msg&quot;: &quot;User `&lt;username&gt;` set lock state for repo `&lt;reponame&gt;` to `&lt;false|true&gt;`&quot;
         }
error :  null
</pre></div>
</div>
</div>
<div class="section" id="get-ip">
<h3>get_ip<a class="headerlink" href="#get-ip" title="Permalink to this headline">¶</a></h3>
<p>Return IP address as seen from Kallithea server, together with all
defined IP addresses for given user.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_ip&quot;
args :    {
            &quot;userid&quot; : &quot;&lt;user_id or username&gt;&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : {
             &quot;ip_addr_server&quot;: &lt;ip_from_clien&gt;&quot;,
             &quot;user_ips&quot;: [
                            {
                               &quot;ip_addr&quot;: &quot;&lt;ip_with_mask&gt;&quot;,
                               &quot;ip_range&quot;: [&quot;&lt;start_ip&gt;&quot;, &quot;&lt;end_ip&gt;&quot;],
                            },
                            ...
                         ]
         }

error :  null
</pre></div>
</div>
</div>
<div class="section" id="get-user">
<h3>get_user<a class="headerlink" href="#get-user" title="Permalink to this headline">¶</a></h3>
<p>Get a user by username or userid. The result is empty if user can’t be found.
If userid param is skipped, it is set to id of user who is calling this method.
Any userid can be specified when the command is executed using the api_key of a user with admin rights.
Regular users can only speicy their own userid.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_user&quot;
args :    {
            &quot;userid&quot; : &quot;&lt;username or user_id Optional(=apiuser)&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: None if user does not exist or
        {
            &quot;user_id&quot; :     &quot;&lt;user_id&gt;&quot;,
            &quot;api_key&quot; :     &quot;&lt;api_key&gt;&quot;,
            &quot;username&quot; :    &quot;&lt;username&gt;&quot;,
            &quot;firstname&quot;:    &quot;&lt;firstname&gt;&quot;,
            &quot;lastname&quot; :    &quot;&lt;lastname&gt;&quot;,
            &quot;email&quot; :       &quot;&lt;email&gt;&quot;,
            &quot;emails&quot;:       &quot;&lt;list_of_all_additional_emails&gt;&quot;,
            &quot;ip_addresses&quot;: &quot;&lt;list_of_ip_addresses_for_user&gt;&quot;,
            &quot;active&quot; :      &quot;&lt;bool&gt;&quot;,
            &quot;admin&quot; :       &quot;&lt;bool&gt;&quot;,
            &quot;ldap_dn&quot; :     &quot;&lt;ldap_dn&gt;&quot;,
            &quot;last_login&quot;:   &quot;&lt;last_login&gt;&quot;,
            &quot;permissions&quot;: {
                &quot;global&quot;: [&quot;hg.create.repository&quot;,
                           &quot;repository.read&quot;,
                           &quot;hg.register.manual_activate&quot;],
                &quot;repositories&quot;: {&quot;repo1&quot;: &quot;repository.none&quot;},
                &quot;repositories_groups&quot;: {&quot;Group1&quot;: &quot;group.read&quot;}
             },
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="get-users">
<h3>get_users<a class="headerlink" href="#get-users" title="Permalink to this headline">¶</a></h3>
<p>List all existing users.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_users&quot;
args :    { }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: [
          {
            &quot;user_id&quot; :     &quot;&lt;user_id&gt;&quot;,
            &quot;api_key&quot; :     &quot;&lt;api_key&gt;&quot;,
            &quot;username&quot; :    &quot;&lt;username&gt;&quot;,
            &quot;firstname&quot;:    &quot;&lt;firstname&gt;&quot;,
            &quot;lastname&quot; :    &quot;&lt;lastname&gt;&quot;,
            &quot;email&quot; :       &quot;&lt;email&gt;&quot;,
            &quot;emails&quot;:       &quot;&lt;list_of_all_additional_emails&gt;&quot;,
            &quot;ip_addresses&quot;: &quot;&lt;list_of_ip_addresses_for_user&gt;&quot;,
            &quot;active&quot; :      &quot;&lt;bool&gt;&quot;,
            &quot;admin&quot; :       &quot;&lt;bool&gt;&quot;,
            &quot;ldap_dn&quot; :     &quot;&lt;ldap_dn&gt;&quot;,
            &quot;last_login&quot;:   &quot;&lt;last_login&gt;&quot;,
          },
          …
        ]
error:  null
</pre></div>
</div>
</div>
<div class="section" id="create-user">
<span id="id2"></span><h3>create_user<a class="headerlink" href="#create-user" title="Permalink to this headline">¶</a></h3>
<p>Create new user.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;create_user&quot;
args :    {
            &quot;username&quot; :  &quot;&lt;username&gt;&quot;,
            &quot;email&quot; :     &quot;&lt;useremail&gt;&quot;,
            &quot;password&quot; :  &quot;&lt;password = Optional(None)&gt;&quot;,
            &quot;firstname&quot; : &quot;&lt;firstname&gt; = Optional(None)&quot;,
            &quot;lastname&quot; :  &quot;&lt;lastname&gt; = Optional(None)&quot;,
            &quot;active&quot; :    &quot;&lt;bool&gt; = Optional(True)&quot;,
            &quot;admin&quot; :     &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;ldap_dn&quot; :   &quot;&lt;ldap_dn&gt; = Optional(None)&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;created new user `&lt;username&gt;`&quot;,
          &quot;user&quot;: {
            &quot;user_id&quot; :  &quot;&lt;user_id&gt;&quot;,
            &quot;username&quot; : &quot;&lt;username&gt;&quot;,
            &quot;firstname&quot;: &quot;&lt;firstname&gt;&quot;,
            &quot;lastname&quot; : &quot;&lt;lastname&gt;&quot;,
            &quot;email&quot; :    &quot;&lt;email&gt;&quot;,
            &quot;emails&quot;:    &quot;&lt;list_of_all_additional_emails&gt;&quot;,
            &quot;active&quot; :   &quot;&lt;bool&gt;&quot;,
            &quot;admin&quot; :    &quot;&lt;bool&gt;&quot;,
            &quot;ldap_dn&quot; :  &quot;&lt;ldap_dn&gt;&quot;,
            &quot;last_login&quot;: &quot;&lt;last_login&gt;&quot;,
          },
        }
error:  null
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kallithea-api create_user username:bent email:bent@example.com firstname:Bent lastname:Bentsen extern_type:ldap extern_name:uid=bent,dc=example,dc=com
</pre></div>
</div>
</div>
<div class="section" id="update-user">
<h3>update_user<a class="headerlink" href="#update-user" title="Permalink to this headline">¶</a></h3>
<p>Update the given user if such user exists.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;update_user&quot;
args :    {
            &quot;userid&quot; : &quot;&lt;user_id or username&gt;&quot;,
            &quot;username&quot; :  &quot;&lt;username&gt; = Optional(None)&quot;,
            &quot;email&quot; :     &quot;&lt;useremail&gt; = Optional(None)&quot;,
            &quot;password&quot; :  &quot;&lt;password&gt; = Optional(None)&quot;,
            &quot;firstname&quot; : &quot;&lt;firstname&gt; = Optional(None)&quot;,
            &quot;lastname&quot; :  &quot;&lt;lastname&gt; = Optional(None)&quot;,
            &quot;active&quot; :    &quot;&lt;bool&gt; = Optional(None)&quot;,
            &quot;admin&quot; :     &quot;&lt;bool&gt; = Optional(None)&quot;,
            &quot;ldap_dn&quot; :   &quot;&lt;ldap_dn&gt; = Optional(None)&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;updated user ID:&lt;userid&gt; &lt;username&gt;&quot;,
          &quot;user&quot;: {
            &quot;user_id&quot; :  &quot;&lt;user_id&gt;&quot;,
            &quot;api_key&quot; :  &quot;&lt;api_key&gt;&quot;,
            &quot;username&quot; : &quot;&lt;username&gt;&quot;,
            &quot;firstname&quot;: &quot;&lt;firstname&gt;&quot;,
            &quot;lastname&quot; : &quot;&lt;lastname&gt;&quot;,
            &quot;email&quot; :    &quot;&lt;email&gt;&quot;,
            &quot;emails&quot;:    &quot;&lt;list_of_all_additional_emails&gt;&quot;,
            &quot;active&quot; :   &quot;&lt;bool&gt;&quot;,
            &quot;admin&quot; :    &quot;&lt;bool&gt;&quot;,
            &quot;ldap_dn&quot; :  &quot;&lt;ldap_dn&gt;&quot;,
            &quot;last_login&quot;: &quot;&lt;last_login&gt;&quot;,
          },
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="delete-user">
<h3>delete_user<a class="headerlink" href="#delete-user" title="Permalink to this headline">¶</a></h3>
<p>Delete the given user if such a user exists.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;delete_user&quot;
args :    {
            &quot;userid&quot; : &quot;&lt;user_id or username&gt;&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;deleted user ID:&lt;userid&gt; &lt;username&gt;&quot;,
          &quot;user&quot;: null
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="get-user-group">
<h3>get_user_group<a class="headerlink" href="#get-user-group" title="Permalink to this headline">¶</a></h3>
<p>Get an existing user group.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_user_group&quot;
args :    {
            &quot;usergroupid&quot; : &quot;&lt;user group id or name&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : None if group not exist
         {
           &quot;users_group_id&quot; : &quot;&lt;id&gt;&quot;,
           &quot;group_name&quot; :     &quot;&lt;groupname&gt;&quot;,
           &quot;active&quot;:          &quot;&lt;bool&gt;&quot;,
           &quot;members&quot; :  [
                          {
                            &quot;user_id&quot; :  &quot;&lt;user_id&gt;&quot;,
                            &quot;api_key&quot; :  &quot;&lt;api_key&gt;&quot;,
                            &quot;username&quot; : &quot;&lt;username&gt;&quot;,
                            &quot;firstname&quot;: &quot;&lt;firstname&gt;&quot;,
                            &quot;lastname&quot; : &quot;&lt;lastname&gt;&quot;,
                            &quot;email&quot; :    &quot;&lt;email&gt;&quot;,
                            &quot;emails&quot;:    &quot;&lt;list_of_all_additional_emails&gt;&quot;,
                            &quot;active&quot; :   &quot;&lt;bool&gt;&quot;,
                            &quot;admin&quot; :    &quot;&lt;bool&gt;&quot;,
                            &quot;ldap_dn&quot; :  &quot;&lt;ldap_dn&gt;&quot;,
                            &quot;last_login&quot;: &quot;&lt;last_login&gt;&quot;,
                          },
                          …
                        ]
         }
error : null
</pre></div>
</div>
</div>
<div class="section" id="get-user-groups">
<h3>get_user_groups<a class="headerlink" href="#get-user-groups" title="Permalink to this headline">¶</a></h3>
<p>List all existing user groups.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_user_groups&quot;
args :    { }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result : [
           {
           &quot;users_group_id&quot; : &quot;&lt;id&gt;&quot;,
           &quot;group_name&quot; :     &quot;&lt;groupname&gt;&quot;,
           &quot;active&quot;:          &quot;&lt;bool&gt;&quot;,
           },
           …
          ]
error : null
</pre></div>
</div>
</div>
<div class="section" id="create-user-group">
<h3>create_user_group<a class="headerlink" href="#create-user-group" title="Permalink to this headline">¶</a></h3>
<p>Create a new user group.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;create_user_group&quot;
args:     {
            &quot;group_name&quot;: &quot;&lt;groupname&gt;&quot;,
            &quot;owner&quot; :     &quot;&lt;owner_name_or_id = Optional(=apiuser)&gt;&quot;,
            &quot;active&quot;:     &quot;&lt;bool&gt; = Optional(True)&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot;: &quot;created new user group `&lt;groupname&gt;`&quot;,
          &quot;users_group&quot;: {
                 &quot;users_group_id&quot; : &quot;&lt;id&gt;&quot;,
                 &quot;group_name&quot; :     &quot;&lt;groupname&gt;&quot;,
                 &quot;active&quot;:          &quot;&lt;bool&gt;&quot;,
           },
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="add-user-to-user-group">
<h3>add_user_to_user_group<a class="headerlink" href="#add-user-to-user-group" title="Permalink to this headline">¶</a></h3>
<p>Adds a user to a user group. If the user already is in that group, success will be
<code class="docutils literal notranslate"><span class="pre">false</span></code>.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;add_user_user_group&quot;
args:     {
            &quot;usersgroupid&quot; : &quot;&lt;user group id or name&gt;&quot;,
            &quot;userid&quot; : &quot;&lt;user_id or username&gt;&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;success&quot;: True|False # depends on if member is in group
          &quot;msg&quot;: &quot;added member `&lt;username&gt;` to a user group `&lt;groupname&gt;` |
                  User is already in that group&quot;
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="remove-user-from-user-group">
<h3>remove_user_from_user_group<a class="headerlink" href="#remove-user-from-user-group" title="Permalink to this headline">¶</a></h3>
<p>Remove a user from a user group. If the user isn’t in the given group, success will
be <code class="docutils literal notranslate"><span class="pre">false</span></code>.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;remove_user_from_user_group&quot;
args:     {
            &quot;usersgroupid&quot; : &quot;&lt;user group id or name&gt;&quot;,
            &quot;userid&quot; : &quot;&lt;user_id or username&gt;&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;success&quot;:  True|False,  # depends on if member is in group
          &quot;msg&quot;: &quot;removed member &lt;username&gt; from user group &lt;groupname&gt; |
                  User wasn&#39;t in group&quot;
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="get-repo">
<h3>get_repo<a class="headerlink" href="#get-repo" title="Permalink to this headline">¶</a></h3>
<p>Get an existing repository by its name or repository_id. Members will contain
either users_group or users associated to that repository.
This command can only be executed using the api_key of a user with admin rights,
or that of a regular user with at least read access to the repository.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_repo&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: None if repository does not exist or
        {
            &quot;repo_id&quot; :          &quot;&lt;repo_id&gt;&quot;,
            &quot;repo_name&quot; :        &quot;&lt;reponame&gt;&quot;
            &quot;repo_type&quot; :        &quot;&lt;repo_type&gt;&quot;,
            &quot;clone_uri&quot; :        &quot;&lt;clone_uri&gt;&quot;,
            &quot;enable_downloads&quot;:  &quot;&lt;bool&gt;&quot;,
            &quot;enable_locking&quot;:    &quot;&lt;bool&gt;&quot;,
            &quot;enable_statistics&quot;: &quot;&lt;bool&gt;&quot;,
            &quot;private&quot;:           &quot;&lt;bool&gt;&quot;,
            &quot;created_on&quot; :       &quot;&lt;date_time_created&gt;&quot;,
            &quot;description&quot; :      &quot;&lt;description&gt;&quot;,
            &quot;landing_rev&quot;:       &quot;&lt;landing_rev&gt;&quot;,
            &quot;last_changeset&quot;:    {
                                   &quot;author&quot;:   &quot;&lt;full_author&gt;&quot;,
                                   &quot;date&quot;:     &quot;&lt;date_time_of_commit&gt;&quot;,
                                   &quot;message&quot;:  &quot;&lt;commit_message&gt;&quot;,
                                   &quot;raw_id&quot;:   &quot;&lt;raw_id&gt;&quot;,
                                   &quot;revision&quot;: &quot;&lt;numeric_revision&gt;&quot;,
                                   &quot;short_id&quot;: &quot;&lt;short_id&gt;&quot;
                                 }
            &quot;owner&quot;:             &quot;&lt;repo_owner&gt;&quot;,
            &quot;fork_of&quot;:           &quot;&lt;name_of_fork_parent&gt;&quot;,
            &quot;members&quot; :     [
                              {
                                &quot;type&quot;:        &quot;user&quot;,
                                &quot;user_id&quot; :    &quot;&lt;user_id&gt;&quot;,
                                &quot;api_key&quot; :    &quot;&lt;api_key&gt;&quot;,
                                &quot;username&quot; :   &quot;&lt;username&gt;&quot;,
                                &quot;firstname&quot;:   &quot;&lt;firstname&gt;&quot;,
                                &quot;lastname&quot; :   &quot;&lt;lastname&gt;&quot;,
                                &quot;email&quot; :      &quot;&lt;email&gt;&quot;,
                                &quot;emails&quot;:      &quot;&lt;list_of_all_additional_emails&gt;&quot;,
                                &quot;active&quot; :     &quot;&lt;bool&gt;&quot;,
                                &quot;admin&quot; :      &quot;&lt;bool&gt;&quot;,
                                &quot;ldap_dn&quot; :    &quot;&lt;ldap_dn&gt;&quot;,
                                &quot;last_login&quot;:  &quot;&lt;last_login&gt;&quot;,
                                &quot;permission&quot; : &quot;repository.(read|write|admin)&quot;
                              },
                              …
                              {
                                &quot;type&quot;:      &quot;users_group&quot;,
                                &quot;id&quot; :       &quot;&lt;usersgroupid&gt;&quot;,
                                &quot;name&quot; :     &quot;&lt;usersgroupname&gt;&quot;,
                                &quot;active&quot;:    &quot;&lt;bool&gt;&quot;,
                                &quot;permission&quot; : &quot;repository.(read|write|admin)&quot;
                              },
                              …
                            ]
             &quot;followers&quot;:   [
                              {
                                &quot;user_id&quot; :     &quot;&lt;user_id&gt;&quot;,
                                &quot;username&quot; :    &quot;&lt;username&gt;&quot;,
                                &quot;api_key&quot; :     &quot;&lt;api_key&gt;&quot;,
                                &quot;firstname&quot;:    &quot;&lt;firstname&gt;&quot;,
                                &quot;lastname&quot; :    &quot;&lt;lastname&gt;&quot;,
                                &quot;email&quot; :       &quot;&lt;email&gt;&quot;,
                                &quot;emails&quot;:       &quot;&lt;list_of_all_additional_emails&gt;&quot;,
                                &quot;ip_addresses&quot;: &quot;&lt;list_of_ip_addresses_for_user&gt;&quot;,
                                &quot;active&quot; :      &quot;&lt;bool&gt;&quot;,
                                &quot;admin&quot; :       &quot;&lt;bool&gt;&quot;,
                                &quot;ldap_dn&quot; :     &quot;&lt;ldap_dn&gt;&quot;,
                                &quot;last_login&quot;:   &quot;&lt;last_login&gt;&quot;,
                              },
                              …
             ]
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="get-repos">
<h3>get_repos<a class="headerlink" href="#get-repos" title="Permalink to this headline">¶</a></h3>
<p>List all existing repositories.
This command can only be executed using the api_key of a user with admin rights,
or that of a regular user with at least read access to the repository.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_repos&quot;
args:     { }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: [
          {
            &quot;repo_id&quot; :          &quot;&lt;repo_id&gt;&quot;,
            &quot;repo_name&quot; :        &quot;&lt;reponame&gt;&quot;
            &quot;repo_type&quot; :        &quot;&lt;repo_type&gt;&quot;,
            &quot;clone_uri&quot; :        &quot;&lt;clone_uri&gt;&quot;,
            &quot;private&quot; :          &quot;&lt;bool&gt;&quot;,
            &quot;created_on&quot; :       &quot;&lt;datetimecreated&gt;&quot;,
            &quot;description&quot; :      &quot;&lt;description&gt;&quot;,
            &quot;landing_rev&quot;:       &quot;&lt;landing_rev&gt;&quot;,
            &quot;owner&quot;:             &quot;&lt;repo_owner&gt;&quot;,
            &quot;fork_of&quot;:           &quot;&lt;name_of_fork_parent&gt;&quot;,
            &quot;enable_downloads&quot;:  &quot;&lt;bool&gt;&quot;,
            &quot;enable_locking&quot;:    &quot;&lt;bool&gt;&quot;,
            &quot;enable_statistics&quot;: &quot;&lt;bool&gt;&quot;,
          },
          …
        ]
error:  null
</pre></div>
</div>
</div>
<div class="section" id="get-repo-nodes">
<h3>get_repo_nodes<a class="headerlink" href="#get-repo-nodes" title="Permalink to this headline">¶</a></h3>
<p>Return a list of files and directories for a given path at the given revision.
It is possible to specify ret_type to show only <code class="docutils literal notranslate"><span class="pre">files</span></code> or <code class="docutils literal notranslate"><span class="pre">dirs</span></code>.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;get_repo_nodes&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;revision&quot;  : &quot;&lt;revision&gt;&quot;,
            &quot;root_path&quot; : &quot;&lt;root_path&gt;&quot;,
            &quot;ret_type&quot;  : &quot;&lt;ret_type&gt; = Optional(&#39;all&#39;)&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: [
          {
            &quot;name&quot; :        &quot;&lt;name&gt;&quot;
            &quot;type&quot; :        &quot;&lt;type&gt;&quot;,
          },
          …
        ]
error:  null
</pre></div>
</div>
</div>
<div class="section" id="create-repo">
<h3>create_repo<a class="headerlink" href="#create-repo" title="Permalink to this headline">¶</a></h3>
<p>Create a repository. If the repository name contains “/”, the repository will be
created in the repository group indicated by that path. Any such repository
groups need to exist before calling this method, or the call will fail.
For example “foo/bar/baz” will create a repository “baz” inside the repository
group “bar” which itself is in a repository group “foo”, but both “foo” and
“bar” already need to exist before calling this method.
This command can only be executed using the api_key of a user with admin rights,
or that of a regular user with create repository permission.
Regular users cannot specify owner parameter.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;create_repo&quot;
args:     {
            &quot;repo_name&quot; :        &quot;&lt;reponame&gt;&quot;,
            &quot;owner&quot; :            &quot;&lt;owner_name_or_id = Optional(=apiuser)&gt;&quot;,
            &quot;repo_type&quot; :        &quot;&lt;repo_type&gt; = Optional(&#39;hg&#39;)&quot;,
            &quot;description&quot; :      &quot;&lt;description&gt; = Optional(&#39;&#39;)&quot;,
            &quot;private&quot; :          &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;clone_uri&quot; :        &quot;&lt;clone_uri&gt; = Optional(None)&quot;,
            &quot;landing_rev&quot; :      &quot;&lt;landing_rev&gt; = Optional(&#39;tip&#39;)&quot;,
            &quot;enable_downloads&quot;:  &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;enable_locking&quot;:    &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;enable_statistics&quot;: &quot;&lt;bool&gt; = Optional(False)&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot;: &quot;Created new repository `&lt;reponame&gt;`&quot;,
          &quot;repo&quot;: {
            &quot;repo_id&quot; :          &quot;&lt;repo_id&gt;&quot;,
            &quot;repo_name&quot; :        &quot;&lt;reponame&gt;&quot;
            &quot;repo_type&quot; :        &quot;&lt;repo_type&gt;&quot;,
            &quot;clone_uri&quot; :        &quot;&lt;clone_uri&gt;&quot;,
            &quot;private&quot; :          &quot;&lt;bool&gt;&quot;,
            &quot;created_on&quot; :       &quot;&lt;datetimecreated&gt;&quot;,
            &quot;description&quot; :      &quot;&lt;description&gt;&quot;,
            &quot;landing_rev&quot;:       &quot;&lt;landing_rev&gt;&quot;,
            &quot;owner&quot;:             &quot;&lt;username or user_id&gt;&quot;,
            &quot;fork_of&quot;:           &quot;&lt;name_of_fork_parent&gt;&quot;,
            &quot;enable_downloads&quot;:  &quot;&lt;bool&gt;&quot;,
            &quot;enable_locking&quot;:    &quot;&lt;bool&gt;&quot;,
            &quot;enable_statistics&quot;: &quot;&lt;bool&gt;&quot;,
          },
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="update-repo">
<h3>update_repo<a class="headerlink" href="#update-repo" title="Permalink to this headline">¶</a></h3>
<p>Update a repository.
This command can only be executed using the api_key of a user with admin rights,
or that of a regular user with create repository permission.
Regular users cannot specify owner parameter.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;update_repo&quot;
args:     {
            &quot;repoid&quot; :           &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;name&quot; :             &quot;&lt;reponame&gt; = Optional(&#39;&#39;)&quot;,
            &quot;group&quot; :            &quot;&lt;group_id&gt; = Optional(None)&quot;,
            &quot;owner&quot; :            &quot;&lt;owner_name_or_id = Optional(=apiuser)&gt;&quot;,
            &quot;description&quot; :      &quot;&lt;description&gt; = Optional(&#39;&#39;)&quot;,
            &quot;private&quot; :          &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;clone_uri&quot; :        &quot;&lt;clone_uri&gt; = Optional(None)&quot;,
            &quot;landing_rev&quot; :      &quot;&lt;landing_rev&gt; = Optional(&#39;tip&#39;)&quot;,
            &quot;enable_downloads&quot;:  &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;enable_locking&quot;:    &quot;&lt;bool&gt; = Optional(False)&quot;,
            &quot;enable_statistics&quot;: &quot;&lt;bool&gt; = Optional(False)&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot;: &quot;updated repo ID:repo_id `&lt;reponame&gt;`&quot;,
          &quot;repository&quot;: {
            &quot;repo_id&quot; :          &quot;&lt;repo_id&gt;&quot;,
            &quot;repo_name&quot; :        &quot;&lt;reponame&gt;&quot;
            &quot;repo_type&quot; :        &quot;&lt;repo_type&gt;&quot;,
            &quot;clone_uri&quot; :        &quot;&lt;clone_uri&gt;&quot;,
            &quot;private&quot;:           &quot;&lt;bool&gt;&quot;,
            &quot;created_on&quot; :       &quot;&lt;datetimecreated&gt;&quot;,
            &quot;description&quot; :      &quot;&lt;description&gt;&quot;,
            &quot;landing_rev&quot;:       &quot;&lt;landing_rev&gt;&quot;,
            &quot;owner&quot;:             &quot;&lt;username or user_id&gt;&quot;,
            &quot;fork_of&quot;:           &quot;&lt;name_of_fork_parent&gt;&quot;,
            &quot;enable_downloads&quot;:  &quot;&lt;bool&gt;&quot;,
            &quot;enable_locking&quot;:    &quot;&lt;bool&gt;&quot;,
            &quot;enable_statistics&quot;: &quot;&lt;bool&gt;&quot;,
            &quot;last_changeset&quot;:    {
                                   &quot;author&quot;:   &quot;&lt;full_author&gt;&quot;,
                                   &quot;date&quot;:     &quot;&lt;date_time_of_commit&gt;&quot;,
                                   &quot;message&quot;:  &quot;&lt;commit_message&gt;&quot;,
                                   &quot;raw_id&quot;:   &quot;&lt;raw_id&gt;&quot;,
                                   &quot;revision&quot;: &quot;&lt;numeric_revision&gt;&quot;,
                                   &quot;short_id&quot;: &quot;&lt;short_id&gt;&quot;
                                 }
            &quot;locked_by&quot;: &quot;&lt;username&gt;&quot;,
            &quot;locked_date&quot;: &quot;&lt;float lock_time&gt;&quot;,
          },
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="fork-repo">
<h3>fork_repo<a class="headerlink" href="#fork-repo" title="Permalink to this headline">¶</a></h3>
<p>Create a fork of the given repo. If using Celery, this will
return success message immediately and a fork will be created
asynchronously.
This command can only be executed using the api_key of a user with admin
rights, or with the global fork permission, by a regular user with create
repository permission and at least read access to the repository.
Regular users cannot specify owner parameter.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;fork_repo&quot;
args:     {
            &quot;repoid&quot; :          &quot;&lt;reponame or repo_id&gt;&quot;,
            &quot;fork_name&quot;:        &quot;&lt;forkname&gt;&quot;,
            &quot;owner&quot;:            &quot;&lt;username or user_id = Optional(=apiuser)&gt;&quot;,
            &quot;description&quot;:      &quot;&lt;description&gt;&quot;,
            &quot;copy_permissions&quot;: &quot;&lt;bool&gt;&quot;,
            &quot;private&quot;:          &quot;&lt;bool&gt;&quot;,
            &quot;landing_rev&quot;:      &quot;&lt;landing_rev&gt;&quot;

          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot;: &quot;Created fork of `&lt;reponame&gt;` as `&lt;forkname&gt;`&quot;,
          &quot;success&quot;: true
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="delete-repo">
<h3>delete_repo<a class="headerlink" href="#delete-repo" title="Permalink to this headline">¶</a></h3>
<p>Delete a repository.
This command can only be executed using the api_key of a user with admin rights,
or that of a regular user with admin access to the repository.
When <code class="docutils literal notranslate"><span class="pre">forks</span></code> param is set it is possible to detach or delete forks of the deleted repository.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;delete_repo&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;,
            &quot;forks&quot;  : &quot;`delete` or `detach` = Optional(None)&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot;: &quot;Deleted repository `&lt;reponame&gt;`&quot;,
          &quot;success&quot;: true
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="grant-user-permission">
<h3>grant_user_permission<a class="headerlink" href="#grant-user-permission" title="Permalink to this headline">¶</a></h3>
<p>Grant permission for a user on the given repository, or update the existing one if found.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;grant_user_permission&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;userid&quot; : &quot;&lt;username or user_id&gt;&quot;
            &quot;perm&quot; :       &quot;(repository.(none|read|write|admin))&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;Granted perm: `&lt;perm&gt;` for user: `&lt;username&gt;` in repo: `&lt;reponame&gt;`&quot;,
          &quot;success&quot;: true
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="revoke-user-permission">
<h3>revoke_user_permission<a class="headerlink" href="#revoke-user-permission" title="Permalink to this headline">¶</a></h3>
<p>Revoke permission for a user on the given repository.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method  : &quot;revoke_user_permission&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;userid&quot; : &quot;&lt;username or user_id&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;Revoked perm for user: `&lt;username&gt;` in repo: `&lt;reponame&gt;`&quot;,
          &quot;success&quot;: true
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="grant-user-group-permission">
<h3>grant_user_group_permission<a class="headerlink" href="#grant-user-group-permission" title="Permalink to this headline">¶</a></h3>
<p>Grant permission for a user group on the given repository, or update the
existing one if found.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method :  &quot;grant_user_group_permission&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;usersgroupid&quot; : &quot;&lt;user group id or name&gt;&quot;
            &quot;perm&quot; : &quot;(repository.(none|read|write|admin))&quot;,
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;Granted perm: `&lt;perm&gt;` for group: `&lt;usersgroupname&gt;` in repo: `&lt;reponame&gt;`&quot;,
          &quot;success&quot;: true
        }
error:  null
</pre></div>
</div>
</div>
<div class="section" id="revoke-user-group-permission">
<h3>revoke_user_group_permission<a class="headerlink" href="#revoke-user-group-permission" title="Permalink to this headline">¶</a></h3>
<p>Revoke permission for a user group on the given repository.
This command can only be executed using the api_key of a user with admin rights.</p>
<p>INPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_for_response&gt;
api_key : &quot;&lt;api_key&gt;&quot;
method  : &quot;revoke_user_group_permission&quot;
args:     {
            &quot;repoid&quot; : &quot;&lt;reponame or repo_id&gt;&quot;
            &quot;usersgroupid&quot; : &quot;&lt;user group id or name&gt;&quot;
          }
</pre></div>
</div>
<p>OUTPUT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>id : &lt;id_given_in_input&gt;
result: {
          &quot;msg&quot; : &quot;Revoked perm for group: `&lt;usersgroupname&gt;` in repo: `&lt;reponame&gt;`&quot;,
          &quot;success&quot;: true
        }
error:  null
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div style="text-align:center;margin:30px 0;">
  <img src="../_static/kallithea-logo.svg" width="200px"/>
</div>
<h3>Support Kallithea development</h3>
<div style="text-align:center">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="EYXFS3SQPHYUL">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal &ndash; The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
    <div style="padding:5px">
     <a href="https://flattr.com/thing/922714/Donate-to-Software-Freedom-Conservancy" target="_blank">
     <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a>
    </div>
</div>

  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#api-access-for-web-views">API access for web views</a></li>
<li><a class="reference internal" href="#api-access">API access</a></li>
<li><a class="reference internal" href="#api-client">API client</a></li>
<li><a class="reference internal" href="#api-methods">API methods</a><ul>
<li><a class="reference internal" href="#pull">pull</a></li>
<li><a class="reference internal" href="#rescan-repos">rescan_repos</a></li>
<li><a class="reference internal" href="#invalidate-cache">invalidate_cache</a></li>
<li><a class="reference internal" href="#lock">lock</a></li>
<li><a class="reference internal" href="#get-ip">get_ip</a></li>
<li><a class="reference internal" href="#get-user">get_user</a></li>
<li><a class="reference internal" href="#get-users">get_users</a></li>
<li><a class="reference internal" href="#create-user">create_user</a></li>
<li><a class="reference internal" href="#update-user">update_user</a></li>
<li><a class="reference internal" href="#delete-user">delete_user</a></li>
<li><a class="reference internal" href="#get-user-group">get_user_group</a></li>
<li><a class="reference internal" href="#get-user-groups">get_user_groups</a></li>
<li><a class="reference internal" href="#create-user-group">create_user_group</a></li>
<li><a class="reference internal" href="#add-user-to-user-group">add_user_to_user_group</a></li>
<li><a class="reference internal" href="#remove-user-from-user-group">remove_user_from_user_group</a></li>
<li><a class="reference internal" href="#get-repo">get_repo</a></li>
<li><a class="reference internal" href="#get-repos">get_repos</a></li>
<li><a class="reference internal" href="#get-repo-nodes">get_repo_nodes</a></li>
<li><a class="reference internal" href="#create-repo">create_repo</a></li>
<li><a class="reference internal" href="#update-repo">update_repo</a></li>
<li><a class="reference internal" href="#fork-repo">fork_repo</a></li>
<li><a class="reference internal" href="#delete-repo">delete_repo</a></li>
<li><a class="reference internal" href="#grant-user-permission">grant_user_permission</a></li>
<li><a class="reference internal" href="#revoke-user-permission">revoke_user_permission</a></li>
<li><a class="reference internal" href="#grant-user-group-permission">grant_user_group_permission</a></li>
<li><a class="reference internal" href="#revoke-user-group-permission">revoke_user_group_permission</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../changelog.html"
                        title="previous chapter">Changelog</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="models.html"
                        title="next chapter">The <code class="docutils literal notranslate"><span class="pre">models</span></code> module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/api.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="models.html" title="The models module"
             >next</a> |</li>
        <li class="right" >
          <a href="../changelog.html" title="Changelog"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2016 by various authors, licensed as GPLv3..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>