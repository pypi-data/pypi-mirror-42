
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Email settings &#8212; Kallithea 0.3.7 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Optimizing Kallithea performance" href="performance.html" />
    <link rel="prev" title="Repository statistics" href="statistics.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance.html" title="Optimizing Kallithea performance"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="statistics.html" title="Repository statistics"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="email-settings">
<span id="email"></span><h1>Email settings<a class="headerlink" href="#email-settings" title="Permalink to this headline">¶</a></h1>
<p>The Kallithea configuration file has several email related settings. When
these contain correct values, Kallithea will send email in the situations
described below. If the email configuration is not correct so that emails
cannot be sent, all mails will show up in the log output.</p>
<p>Before any email can be sent, an SMTP server has to be configured using the
configuration file setting <code class="docutils literal notranslate"><span class="pre">smtp_server</span></code>. If required for that server, specify
a username (<code class="docutils literal notranslate"><span class="pre">smtp_username</span></code>) and password (<code class="docutils literal notranslate"><span class="pre">smtp_password</span></code>), a non-standard
port (<code class="docutils literal notranslate"><span class="pre">smtp_port</span></code>), encryption settings (<code class="docutils literal notranslate"><span class="pre">smtp_use_tls</span></code> or <code class="docutils literal notranslate"><span class="pre">smtp_use_ssl</span></code>)
and/or specific authentication parameters (<code class="docutils literal notranslate"><span class="pre">smtp_auth</span></code>).</p>
<div class="section" id="application-emails">
<h2>Application emails<a class="headerlink" href="#application-emails" title="Permalink to this headline">¶</a></h2>
<p>Kallithea sends an email to <cite>users</cite> on several occasions:</p>
<ul class="simple">
<li>when comments are given on one of their changesets</li>
<li>when comments are given on changesets they are reviewer on or on which they
commented regardless</li>
<li>when they are invited as reviewer in pull requests</li>
<li>when they request a password reset</li>
</ul>
<p>Kallithea sends an email to all <cite>administrators</cite> upon new account registration.
Administrators are users with the <code class="docutils literal notranslate"><span class="pre">Admin</span></code> flag set on the <em>Admin &gt; Users</em>
page.</p>
<p>When Kallithea wants to send an email but due to an error cannot correctly
determine the intended recipients, the administrators and the addresses
specified in <code class="docutils literal notranslate"><span class="pre">email_to</span></code> in the configuration file are used as fallback.</p>
<p>Recipients will see these emails originating from the sender specified in the
<code class="docutils literal notranslate"><span class="pre">app_email_from</span></code> setting in the configuration file. This setting can either
contain only an email address, like <cite>kallithea-noreply&#64;example.com</cite>, or both
a name and an address in the following format: <cite>Kallithea
&lt;kallithea-noreply&#64;example.com&gt;</cite>. However, if the email is sent due to an
action of a particular user, for example when a comment is given or a pull
request created, the name of that user will be combined with the email address
specified in <code class="docutils literal notranslate"><span class="pre">app_email_from</span></code> to form the sender (and any name part in that
configuration setting disregarded).</p>
<p>The subject of these emails can optionally be prefixed with the value of
<code class="docutils literal notranslate"><span class="pre">email_prefix</span></code> in the configuration file.</p>
<p>A Kallithea-specific header indicating the email type will be added to each
email. This header can be used for email filtering. The header is of the form:</p>
<blockquote>
<div>X-Kallithea-Notification-Type: &lt;type&gt;</div></blockquote>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> is one of:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">pull_request</span></code>: you are invited as reviewer in a pull request</li>
<li><code class="docutils literal notranslate"><span class="pre">pull_request_comment</span></code>: a comment was given on a pull request</li>
<li><code class="docutils literal notranslate"><span class="pre">cs_comment</span></code>: a comment was given on a changeset</li>
<li><code class="docutils literal notranslate"><span class="pre">registration</span></code>: a new user was registered</li>
<li><code class="docutils literal notranslate"><span class="pre">message</span></code>: another type of email</li>
</ul>
</div>
<div class="section" id="error-emails">
<h2>Error emails<a class="headerlink" href="#error-emails" title="Permalink to this headline">¶</a></h2>
<p>When an exception occurs in Kallithea – and unless interactive debugging is
enabled using <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">debug</span> <span class="pre">=</span> <span class="pre">true</span></code> in the <code class="docutils literal notranslate"><span class="pre">[app:main]</span></code> section of the
configuration file – an email with exception details is sent by <a class="reference external" href="https://pypi.python.org/pypi/WebError">WebError</a>’s
<code class="docutils literal notranslate"><span class="pre">ErrorMiddleware</span></code> to the addresses specified in <code class="docutils literal notranslate"><span class="pre">email_to</span></code> in the
configuration file.</p>
<p>Recipients will see these emails originating from the sender specified in the
<code class="docutils literal notranslate"><span class="pre">error_email_from</span></code> setting in the configuration file. This setting can either
contain only an email address, like <cite>kallithea-noreply&#64;example.com</cite>, or both
a name and an address in the following format: <cite>Kallithea Errors
&lt;kallithea-noreply&#64;example.com&gt;</cite>.</p>
<p><em>Note:</em> The <a class="reference external" href="https://pypi.python.org/pypi/WebError">WebError</a> package does not respect <code class="docutils literal notranslate"><span class="pre">smtp_port</span></code> and assumes the
standard SMTP port (25). If you have a remote SMTP server with a different port,
you could set up a local forwarding SMTP server on port 25.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://pylons-webframework.readthedocs.org/en/latest/debugging.html#error-middleware">Error Middleware (Pylons documentation)</a></li>
<li><a class="reference external" href="http://pylons-webframework.readthedocs.org/en/latest/modules/middleware.html#pylons.middleware.ErrorHandler">ErrorHandler (Pylons modules documentation)</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div style="text-align:center;margin:30px 0;">
  <img src="../_static/kallithea-logo.svg" width="200px"/>
</div>
<h3>Support Kallithea development</h3>
<div style="text-align:center">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="EYXFS3SQPHYUL">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal &ndash; The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
    <div style="padding:5px">
     <a href="https://flattr.com/thing/922714/Donate-to-Software-Freedom-Conservancy" target="_blank">
     <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a>
    </div>
</div>

  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Email settings</a><ul>
<li><a class="reference internal" href="#application-emails">Application emails</a></li>
<li><a class="reference internal" href="#error-emails">Error emails</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="statistics.html"
                        title="previous chapter">Repository statistics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="performance.html"
                        title="next chapter">Optimizing Kallithea performance</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/usage/email.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance.html" title="Optimizing Kallithea performance"
             >next</a> |</li>
        <li class="right" >
          <a href="statistics.html" title="Repository statistics"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2016 by various authors, licensed as GPLv3..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>