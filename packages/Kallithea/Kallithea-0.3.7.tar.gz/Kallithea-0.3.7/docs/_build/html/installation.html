
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installation on Unix/Linux &#8212; Kallithea 0.3.7 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation and upgrade on Windows (7/Server 2008 R2 and newer)" href="installation_win.html" />
    <link rel="prev" title="Installation overview" href="overview.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_win.html" title="Installation and upgrade on Windows (7/Server 2008 R2 and newer)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Installation overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-on-unix-linux">
<span id="installation"></span><h1>Installation on Unix/Linux<a class="headerlink" href="#installation-on-unix-linux" title="Permalink to this headline">¶</a></h1>
<p>The following describes three different ways of installing Kallithea:</p>
<ul class="simple">
<li><a class="reference internal" href="#installation-source"><span class="std std-ref">Installation from repository source</span></a>: The simplest way to keep the installation
up-to-date and track any local customizations is to run directly from
source in a Kallithea repository clone, preferably inside a virtualenv
virtual Python environment.</li>
<li><a class="reference internal" href="#installation-virtualenv"><span class="std std-ref">Installing a released version in a virtualenv</span></a>: If you prefer to only use released versions
of Kallithea, the recommended method is to install Kallithea in a virtual
Python environment using <cite>virtualenv</cite>. The advantages of this method over
direct installation is that Kallithea and its dependencies are completely
contained inside the virtualenv (which also means you can have multiple
installations side by side or remove it entirely by just removing the
virtualenv directory) and does not require root privileges.</li>
<li><a class="reference internal" href="#installation-without-virtualenv"><span class="std std-ref">Installing a released version without virtualenv</span></a>: The alternative method of installing
a Kallithea release is using standard pip. The package will be installed in
the same location as all other Python packages you have ever installed. As a
result, removing it is not as straightforward as with a virtualenv, as you’d
have to remove its dependencies manually and make sure that they are not
needed by other packages.</li>
</ul>
<div class="section" id="installation-from-repository-source">
<span id="installation-source"></span><h2>Installation from repository source<a class="headerlink" href="#installation-from-repository-source" title="Permalink to this headline">¶</a></h2>
<p>To install Kallithea in a <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> using the stable branch of the development
repository, follow the instructions below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hg clone https://kallithea-scm.org/repos/kallithea -u stable
cd kallithea
virtualenv ../kallithea-venv
source ../kallithea-venv/bin/activate
pip install --upgrade pip &quot;setuptools&lt;34&quot;
pip install -e .
python2 setup.py compile_catalog   # for translation of the UI
</pre></div>
</div>
<p>You can now proceed to <a class="reference internal" href="setup.html#setup"><span class="std std-ref">Setup</span></a>.</p>
<p>To upgrade, simply update the repository with <code class="docutils literal notranslate"><span class="pre">hg</span> <span class="pre">pull</span> <span class="pre">-u</span></code> and restart the
server.</p>
</div>
<div class="section" id="installing-a-released-version-in-a-virtualenv">
<span id="installation-virtualenv"></span><h2>Installing a released version in a virtualenv<a class="headerlink" href="#installing-a-released-version-in-a-virtualenv" title="Permalink to this headline">¶</a></h2>
<p>It is highly recommended to use a separate <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> for installing Kallithea.
This way, all libraries required by Kallithea will be installed separately from your
main Python installation and other applications and things will be less
problematic when upgrading the system or Kallithea.
An additional benefit of <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> is that it doesn’t require root privileges.</p>
<ul>
<li><p class="first">Assuming you have installed <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>, create a new virtual environment
for example, in <cite>/srv/kallithea/venv</cite>, using the virtualenv command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>virtualenv /srv/kallithea/venv
</pre></div>
</div>
</li>
<li><p class="first">Activate the <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> in your current shell session and make sure the
basic requirements are up-to-date by running:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /srv/kallithea/venv/bin/activate
pip install --upgrade pip &quot;setuptools&lt;34&quot;
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can’t use UNIX <code class="docutils literal notranslate"><span class="pre">sudo</span></code> to source the <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> script; it
will “activate” a shell that terminates immediately. It is also perfectly
acceptable (and desirable) to create a virtualenv as a normal user.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Some dependencies are optional. If you need them, install them in
the virtualenv too:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install psycopg2
pip install python-ldap
</pre></div>
</div>
<p class="last">This might require installation of development packages using your
distribution’s package manager.</p>
</div>
<ul>
<li><p class="first">Make a folder for Kallithea data files, and configuration somewhere on the
filesystem. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir /srv/kallithea
</pre></div>
</div>
</li>
<li><p class="first">Go into the created directory and run this command to install Kallithea:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install kallithea
</pre></div>
</div>
<p>Alternatively, download a .tar.gz from <a class="reference external" href="http://pypi.python.org/pypi/Kallithea">http://pypi.python.org/pypi/Kallithea</a>,
extract it and run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install .
</pre></div>
</div>
</li>
<li><p class="first">This will install Kallithea together with <a class="reference external" href="http://www.pylonsproject.org/">pylons</a> and all other required
python libraries into the activated virtualenv.</p>
</li>
</ul>
<p>You can now proceed to <a class="reference internal" href="setup.html#setup"><span class="std std-ref">Setup</span></a>.</p>
</div>
<div class="section" id="installing-a-released-version-without-virtualenv">
<span id="installation-without-virtualenv"></span><h2>Installing a released version without virtualenv<a class="headerlink" href="#installing-a-released-version-without-virtualenv" title="Permalink to this headline">¶</a></h2>
<p>For installation without virtualenv, ‘just’ use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install kallithea
</pre></div>
</div>
<p>Note that this method requires root privileges and will install packages
globally without using the system’s package manager.</p>
<p>To install as a regular user in <code class="docutils literal notranslate"><span class="pre">~/.local</span></code>, you can use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install --user kallithea
</pre></div>
</div>
<p>You can now proceed to <a class="reference internal" href="setup.html#setup"><span class="std std-ref">Setup</span></a>.</p>
</div>
<div class="section" id="upgrading-kallithea-from-python-package-index-pypi">
<h2>Upgrading Kallithea from Python Package Index (PyPI)<a class="headerlink" href="#upgrading-kallithea-from-python-package-index-pypi" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>It is strongly recommended that you <strong>always</strong> perform a database and
configuration backup before doing an upgrade.</p>
<p class="last">These directions will use ‘{version}’ to note that this is the version of
Kallithea that these files were used with.  If backing up your Kallithea
instance from version 0.1 to 0.2, the <code class="docutils literal notranslate"><span class="pre">my.ini</span></code> file could be
backed up to <code class="docutils literal notranslate"><span class="pre">my.ini.0-1</span></code>.</p>
</div>
<p>If using a SQLite database, stop the Kallithea process/daemon/service, and
then make a copy of the database file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>service kallithea stop
cp kallithea.db kallithea.db.{version}
</pre></div>
</div>
<p>Back up your configuration file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cp my.ini my.ini.{version}
</pre></div>
</div>
<p>Ensure that you are using the Python virtual environment that you originally
installed Kallithea in by running:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip freeze
</pre></div>
</div>
<p>This will list all packages installed in the current environment.  If
Kallithea isn’t listed, activate the correct virtual environment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source /srv/kallithea/venv/bin/activate
</pre></div>
</div>
<p>Once you have verified the environment you can upgrade Kallithea with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install --upgrade kallithea
</pre></div>
</div>
<p>Then run the following command from the installation directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster make-config Kallithea my.ini
</pre></div>
</div>
<p>This will display any changes made by the new version of Kallithea to your
current configuration. It will try to perform an automerge. It is recommended
that you recheck the content after the automerge.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please always make sure your .ini files are up to date. Errors can
often be caused by missing parameters added in new versions.</p>
</div>
<p>It is also recommended that you rebuild the whoosh index after upgrading since
the new whoosh version could introduce some incompatible index changes. Please
read the changelog to see if there were any changes to whoosh.</p>
<p>The final step is to upgrade the database. To do this simply run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster upgrade-db my.ini
</pre></div>
</div>
<p>This will upgrade the schema and update some of the defaults in the database,
and will always recheck the settings of the application, if there are no new
options that need to be set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The DB schema upgrade library has some limitations and can sometimes fail if you try to
upgrade from older major releases. In such a case simply run upgrades sequentially, e.g.,
upgrading from 0.1.X to 0.3.X should be done like this: 0.1.X. &gt; 0.2.X &gt; 0.3.X
You can always specify what version of Kallithea you want to install for example in pip
<cite>pip install Kallithea==0.2</cite></p>
</div>
<p>You may find it helpful to clear out your log file so that new errors are
readily apparent:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo &gt; kallithea.log
</pre></div>
</div>
<p>Once that is complete, you may now start your upgraded Kallithea Instance:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>service kallithea start
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paster serve /srv/kallithea/my.ini
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re using Celery, make sure you restart all instances of it after
upgrade.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div style="text-align:center;margin:30px 0;">
  <img src="_static/kallithea-logo.svg" width="200px"/>
</div>
<h3>Support Kallithea development</h3>
<div style="text-align:center">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="EYXFS3SQPHYUL">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal &ndash; The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
    <div style="padding:5px">
     <a href="https://flattr.com/thing/922714/Donate-to-Software-Freedom-Conservancy" target="_blank">
     <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a>
    </div>
</div>

  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation on Unix/Linux</a><ul>
<li><a class="reference internal" href="#installation-from-repository-source">Installation from repository source</a></li>
<li><a class="reference internal" href="#installing-a-released-version-in-a-virtualenv">Installing a released version in a virtualenv</a></li>
<li><a class="reference internal" href="#installing-a-released-version-without-virtualenv">Installing a released version without virtualenv</a></li>
<li><a class="reference internal" href="#upgrading-kallithea-from-python-package-index-pypi">Upgrading Kallithea from Python Package Index (PyPI)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">Installation overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation_win.html"
                        title="next chapter">Installation and upgrade on Windows (7/Server 2008 R2 and newer)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installation_win.html" title="Installation and upgrade on Windows (7/Server 2008 R2 and newer)"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Installation overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Kallithea 0.3.7 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2016 by various authors, licensed as GPLv3..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>