

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Assembling everything known about a particular gene &mdash; INDRA 1.11.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="INDRA 1.11.0 documentation" href="../index.html"/>
        <link rel="up" title="Tutorials" href="index.html"/>
        <link rel="next" title="REST API" href="../rest_api.html"/>
        <link rel="prev" title="Large-Scale Machine Reading with Amazon Batch" href="machine_reading_aws.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> INDRA
          

          
          </a>

          
            
            
              <div class="version">
                1.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../license.html">License and funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started with INDRA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">INDRA modules reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nl_modeling.html">Using natural language to build models</a></li>
<li class="toctree-l2"><a class="reference internal" href="html_curation.html">The Statement curation interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="machine_reading.html">Large-Scale Machine Reading with Starcluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="machine_reading_aws.html">Large-Scale Machine Reading with Amazon Batch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Assembling everything known about a particular gene</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#collect-mechanisms-from-pathwaycommons-and-the-bel-large-corpus">Collect mechanisms from PathwayCommons and the BEL Large Corpus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collect-a-list-of-publications-that-discuss-the-gene-of-interest">Collect a list of publications that discuss the gene of interest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-the-full-text-or-abstract-corresponding-to-the-publications">Get the full text or abstract corresponding to the publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-the-content-of-the-publications">Read the content of the publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#combine-all-statements-and-run-pre-assembly">Combine all statements and run pre-assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assemble-the-statements-into-a-network-model">Assemble the statements into a network model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api.html">REST API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">INDRA</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Tutorials</a> &raquo;</li>
        
      <li>Assembling everything known about a particular gene</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/gene_network.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="assembling-everything-known-about-a-particular-gene">
<h1>Assembling everything known about a particular gene<a class="headerlink" href="#assembling-everything-known-about-a-particular-gene" title="Permalink to this headline">¶</a></h1>
<p>Assume you are interested in collecting all mechanisms that a particular gene
is involved in. Using INDRA, it is possible to collect everything curated
about the gene in pathway databases and then read all the accessible literature
discussing the gene of interest. This knowledge is aggregated as a set of
INDRA Statements which can then be assembled into several different model
and network formats and possibly shared online.</p>
<p>For the sake of example, assume that the gene of interest is TMEM173.</p>
<p>It is important to use the standard HGNC gene symbol of the gene throughout the
example (this information is available on <a class="reference external" href="http://www.genenames.org/">http://www.genenames.org/</a> or
<a class="reference external" href="http://www.uniprot.org/">http://www.uniprot.org/</a>) - abritrary synonyms will not work!</p>
<div class="section" id="collect-mechanisms-from-pathwaycommons-and-the-bel-large-corpus">
<h2>Collect mechanisms from PathwayCommons and the BEL Large Corpus<a class="headerlink" href="#collect-mechanisms-from-pathwaycommons-and-the-bel-large-corpus" title="Permalink to this headline">¶</a></h2>
<p>We first collect Statements from the PathwayCommons database via INDRA’s
BioPAX API and then collect Statements from the BEL Large Corpus via INDRA’s
BEL API.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">indra.tools.gene_network</span> <span class="kn">import</span> <span class="n">GeneNetwork</span>

<span class="n">gn</span> <span class="o">=</span> <span class="n">GeneNetwork</span><span class="p">([</span><span class="s1">&#39;TMEM173&#39;</span><span class="p">])</span>
<span class="n">biopax_stmts</span> <span class="o">=</span> <span class="n">gn</span><span class="o">.</span><span class="n">get_biopax_stmts</span><span class="p">()</span>
<span class="n">bel_stmts</span> <span class="o">=</span> <span class="n">gn</span><span class="o">.</span><span class="n">get_bel_stmts</span><span class="p">()</span>
</pre></div>
</div>
<p>at this point <cite>biopax_stmts</cite> and <cite>bel_stmts</cite> are two lists of INDRA Statements.</p>
</div>
<div class="section" id="collect-a-list-of-publications-that-discuss-the-gene-of-interest">
<h2>Collect a list of publications that discuss the gene of interest<a class="headerlink" href="#collect-a-list-of-publications-that-discuss-the-gene-of-interest" title="Permalink to this headline">¶</a></h2>
<p>We next use INDRA’s literature client to find PubMed IDs (PMIDs) that discuss
the gene of interest. To find articles that are annotated with the given gene,
INDRA first looks up the Entrez ID corresponding to the gene name and then
finds associated publications.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">indra</span> <span class="kn">import</span> <span class="n">literature</span>

<span class="n">pmids</span> <span class="o">=</span> <span class="n">literature</span><span class="o">.</span><span class="n">pubmed_client</span><span class="o">.</span><span class="n">get_ids_for_gene</span><span class="p">(</span><span class="s1">&#39;TMEM173&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The variable <cite>pmid</cite> now contains a list of PMIDs associated with the gene.</p>
</div>
<div class="section" id="get-the-full-text-or-abstract-corresponding-to-the-publications">
<h2>Get the full text or abstract corresponding to the publications<a class="headerlink" href="#get-the-full-text-or-abstract-corresponding-to-the-publications" title="Permalink to this headline">¶</a></h2>
<p>Next we use INDRA’s literature client to fetch the full text (if available) or
the abstract corresponding to the PMIDs we have just collected.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">indra</span> <span class="kn">import</span> <span class="n">literature</span>

<span class="n">paper_contents</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">pmid</span> <span class="ow">in</span> <span class="n">pmids</span><span class="p">:</span>
    <span class="n">content</span><span class="p">,</span> <span class="n">content_type</span> <span class="o">=</span> <span class="n">literature</span><span class="o">.</span><span class="n">get_full_text</span><span class="p">(</span><span class="n">pmid</span><span class="p">,</span> <span class="s1">&#39;pmid&#39;</span><span class="p">)</span>
    <span class="n">paper_contents</span><span class="p">[</span><span class="n">pmid</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span>
</pre></div>
</div>
<p>We now have a dictionary called <cite>paper_contents</cite> which stores the content and
the content type of each PMID we looked up.</p>
</div>
<div class="section" id="read-the-content-of-the-publications">
<h2>Read the content of the publications<a class="headerlink" href="#read-the-content-of-the-publications" title="Permalink to this headline">¶</a></h2>
<p>We next run the REACH reading system on the publications. Depending on the
content type, different calls need to be made via INDRA’s REACH API.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">indra</span> <span class="kn">import</span> <span class="n">literature</span>
<span class="kn">from</span> <span class="nn">indra.sources</span> <span class="kn">import</span> <span class="n">reach</span>

<span class="n">read_offline</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">literature_stmts</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">pmid</span><span class="p">,</span> <span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span> <span class="ow">in</span> <span class="n">paper_contents</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">rp</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Reading </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pmid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;abstract&#39;</span><span class="p">:</span>
        <span class="n">rp</span> <span class="o">=</span> <span class="n">reach</span><span class="o">.</span><span class="n">process_text</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">citation</span><span class="o">=</span><span class="n">pmid</span><span class="p">,</span> <span class="n">offline</span><span class="o">=</span><span class="n">read_offline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;pmc_oa_xml&#39;</span><span class="p">:</span>
        <span class="n">rp</span> <span class="o">=</span> <span class="n">reach</span><span class="o">.</span><span class="n">process_nxml_str</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">offline</span><span class="o">=</span><span class="n">read_offline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;elsevier_xml&#39;</span><span class="p">:</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="n">literature</span><span class="o">.</span><span class="n">elsevier_client</span><span class="o">.</span><span class="n">extract_text</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">txt</span><span class="p">:</span>
            <span class="n">rp</span> <span class="o">=</span> <span class="n">reach</span><span class="o">.</span><span class="n">process_text</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="n">citation</span><span class="o">=</span><span class="n">pmid</span><span class="p">,</span> <span class="n">offline</span><span class="o">=</span><span class="n">read_offline</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">literature_stmts</span> <span class="o">+=</span> <span class="n">rp</span><span class="o">.</span><span class="n">statements</span>
</pre></div>
</div>
<p>The list <cite>literature_stmts</cite> now contains the results of all the statements
that were read.</p>
</div>
<div class="section" id="combine-all-statements-and-run-pre-assembly">
<h2>Combine all statements and run pre-assembly<a class="headerlink" href="#combine-all-statements-and-run-pre-assembly" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">indra.tools</span> <span class="kn">import</span> <span class="n">assemble_corpus</span>

<span class="n">stmts</span> <span class="o">=</span> <span class="n">biopax_stmts</span> <span class="o">+</span> <span class="n">bel_stmts</span> <span class="o">+</span> <span class="n">literature_stmts</span>

<span class="n">stmts</span> <span class="o">=</span> <span class="n">assemble_corpus</span><span class="o">.</span><span class="n">map_grounding</span><span class="p">(</span><span class="n">stmts</span><span class="p">)</span>
<span class="n">stmts</span> <span class="o">=</span> <span class="n">assemble_corpus</span><span class="o">.</span><span class="n">map_sequence</span><span class="p">(</span><span class="n">stmts</span><span class="p">)</span>
<span class="n">stmts</span> <span class="o">=</span> <span class="n">assemble_corpus</span><span class="o">.</span><span class="n">run_preassembly</span><span class="p">(</span><span class="n">stmts</span><span class="p">)</span>
</pre></div>
</div>
<p>At this point <cite>stmts</cite> contains a list of Statements collected with grounding,
sequences having been mapped, duplicates combined and less specific variants
of statements hidden. It is possible to run other filters on the results such
as to keep only human genes, remove Statements with ungrounded genes, or
to keep only certain types of interactions.</p>
</div>
<div class="section" id="assemble-the-statements-into-a-network-model">
<h2>Assemble the statements into a network model<a class="headerlink" href="#assemble-the-statements-into-a-network-model" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">indra.assemblers.cx</span> <span class="kn">import</span> <span class="n">CxAssembler</span>
<span class="kn">from</span> <span class="nn">indra.databases</span> <span class="kn">import</span> <span class="n">ndex_client</span>

<span class="n">cxa</span> <span class="o">=</span> <span class="n">CxAssembler</span><span class="p">(</span><span class="n">stmts</span><span class="p">)</span>
<span class="n">cx_str</span> <span class="o">=</span> <span class="n">cxa</span><span class="o">.</span><span class="n">make_model</span><span class="p">()</span>
</pre></div>
</div>
<p>We can now upload this network to the Network Data Exchange (NDEx).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ndex_cred</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;myusername&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;xxx&#39;</span><span class="p">}</span>
<span class="n">network_id</span> <span class="o">=</span> <span class="n">ndex_client</span><span class="o">.</span><span class="n">create_network</span><span class="p">(</span><span class="n">cx_str</span><span class="p">,</span> <span class="n">ndex_cred</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">network_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rest_api.html" class="btn btn-neutral float-right" title="REST API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="machine_reading_aws.html" class="btn btn-neutral" title="Large-Scale Machine Reading with Amazon Batch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, B. M. Gyori, J. A. Bachman.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.11.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>