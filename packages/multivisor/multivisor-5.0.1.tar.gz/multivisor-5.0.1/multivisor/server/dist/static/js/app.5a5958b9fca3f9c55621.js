webpackJsonp([1],{"7zck":function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("/5sW"),r=s("3EgV"),n=s.n(r),i=(s("7zck"),s("Dd8w")),c=s.n(i),a=s("NYxO"),l={name:"ProcessChip",computed:c()({},Object(a.c)(["nbRunningProcesses","nbStoppedProcesses"]))},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",flat:"",router:"",to:"/view/process"},slot:"activator"},[s("v-icon",{staticClass:"mr-2"},[e._v("settings")]),e._v(" "),s("div",[s("v-icon",{attrs:{small:""}},[e._v("thumb_up")]),e._v("\n    "+e._s(e.nbRunningProcesses)+"\n    "),s("v-icon",{staticClass:"ml-1",attrs:{small:""}},[e._v("thumb_down")]),e._v("\n    "+e._s(e.nbStoppedProcesses)+"\n  ")],1)],1),e._v(" "),s("span",[e._v("Processes")])],1)},staticRenderFns:[]},v=s("VU/8")(l,u,!1,null,null,null).exports,p={name:"SupervisorChip",computed:c()({},Object(a.c)(["nbRunningSupervisors","nbStoppedSupervisors"]))},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-tooltip",{attrs:{bottom:""}},[s("v-btn",{attrs:{slot:"activator",flat:"",router:"",to:"/view/supervisor"},slot:"activator"},[s("v-icon",{staticClass:"mr-2"},[e._v("visibility")]),e._v(" "),s("div",[s("v-icon",{attrs:{small:""}},[e._v("thumb_up")]),e._v("\n    "+e._s(e.nbRunningSupervisors)+"\n    "),s("v-icon",{staticClass:"ml-1",attrs:{small:""}},[e._v("thumb_down")]),e._v("\n    "+e._s(e.nbStoppedSupervisors)+"\n  ")],1)],1),e._v(" "),s("span",[e._v("Supervisors")])],1)},staticRenderFns:[]},h=s("VU/8")(p,d,!1,null,null,null).exports,m={computed:c()({},Object(a.c)(["nbGroups"]))},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-tooltip",{attrs:{bottom:""}},[t("v-btn",{attrs:{slot:"activator",flat:"",router:"",to:"/view/group"},slot:"activator"},[t("v-icon",{staticClass:"mr-2"},[this._v("group_work")]),this._v("\n    "+this._s(this.nbGroups)+"\n  ")],1),this._v(" "),t("span",[this._v("Groups")])],1)},staticRenderFns:[]},_=s("VU/8")(m,f,!1,null,null,null).exports,g={name:"ActionBar",computed:{selectedProcesses:function(){return this.$store.state.selectedProcesses}},methods:c()({},Object(a.b)(["selectAll","clearSelected","restartSelected","stopSelected"]))},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-speed-dial",{attrs:{"open-on-hover":"",transition:"scale-transition",direction:"bottom"}},[s("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[s("v-icon",[e._v("more_vert")])],1),e._v(" "),s("v-tooltip",{attrs:{left:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",fab:"",small:"",dark:"",color:"green darken-2"},on:{click:function(t){e.restartSelected()}},slot:"activator"},[s("v-icon",[e._v("autorenew")])],1),e._v(" "),s("span",[e._v("(Re)start selected processes")])],1),e._v(" "),s("v-tooltip",{attrs:{left:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",fab:"",small:"",dark:"",color:"red darken-2"},on:{click:function(t){e.stopSelected()}},slot:"activator"},[s("v-icon",[e._v("stop")])],1),e._v(" "),s("span",[e._v("Stop selected processes")])],1),e._v(" "),s("v-tooltip",{attrs:{left:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",fab:"",small:"",dark:"",color:"blue darken-1"},on:{click:function(t){e.clearSelected()}},slot:"activator"},[s("v-icon",[e._v("clear_all")])],1),e._v(" "),s("span",[e._v("Clear selection")])],1),e._v(" "),s("v-tooltip",{attrs:{left:""}},[s("v-btn",{attrs:{slot:"activator",fab:"",small:"",dark:"",color:"blue darken-1"},on:{click:function(t){e.selectAll()}},slot:"activator"},[s("v-icon",[e._v("select_all")])],1),e._v(" "),s("span",[e._v("Select all")])],1)],1)},staticRenderFns:[]},P={name:"ToolBar",components:{ActionBar:s("VU/8")(g,b,!1,null,null,null).exports,ProcessChip:v,SupervisorChip:h,GroupChip:_},computed:c()({},Object(a.c)(["name"]),{search:{get:function(){return this.$store.state.search},set:function(e){this.$store.commit("updateSearch",e)}}})},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-toolbar",{staticClass:"primary",attrs:{fixed:"",dark:"",app:""}},[s("v-toolbar-title",[s("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[e._v(e._s(e.name))])],1),e._v(" "),s("v-spacer"),e._v(" "),s("v-text-field",{attrs:{"append-icon":"search",clearable:"","single-line":"","hide-details":"",placeholder:"Filter...",color:"grey lighten-1"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),s("ActionBar"),e._v(" "),s("v-toolbar-items",[s("ProcessChip",{staticClass:"hidden-sm-and-down"}),e._v(" "),s("SupervisorChip",{staticClass:"hidden-sm-and-down"}),e._v(" "),s("GroupChip",{staticClass:"hidden-sm-and-down"})],1)],1)},staticRenderFns:[]},w=s("VU/8")(P,S,!1,null,null,null).exports,x={STOPPED:"red",STARTING:"blue",RUNNING:"green",BACKOFF:"orange",STOPPING:"blue",EXITED:"red",FATAL:"purple",UNKNOWN:"grey"},y={DEBUG:"grey darken-2",INFO:"grey darken-3",WARNING:"orange",ERROR:"error"},k=function(e,t){var s=new FormData;return s.append("supervisor",e),fetch("/supervisor/"+t,{method:"POST",body:s})},$=function(e,t){var s=new FormData;s.append("uid",e),fetch("/process/"+t,{method:"POST",body:s})},C=function(e,t){if(0===e)return"0 b";var s=t||2,o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(s))+" "+["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"][o]},N={name:"NotificationBar",data:function(){return{visible:!1,color:"info"}},watch:{lastNotification:function(e){this.visible=!0,this.color=y[e.level]}},computed:{lastNotification:function(){var e=this.$store.state.notifications.length;return e?this.$store.state.notifications[e-1]:{message:""}}}},R={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-snackbar",{attrs:{timeout:5e3,bottom:"",right:"",color:e.color},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v("\n  "+e._s(e.lastNotification.message)+"\n")])},staticRenderFns:[]},D=s("VU/8")(N,R,!1,null,null,null).exports,E={name:"LogSheet",data:function(){return{text:"",size:0,maximize:!1,autoScroll:!0,eventSource:null}},watch:{visible:function(){this.viewLog()}},computed:{log:function(){return this.$store.state.log},visible:{get:function(){return this.$store.state.log.visible},set:function(e){this.$store.commit("setLogVisible",e)}},title:function(){return this.log.visible?("out"===this.log.stream?"O-log of ":"E-log of ")+"\n      "+this.log.process.name+" on "+this.log.process.supervisor:""},windowSize:function(){var e=window.innerHeight;return"height: "+(this.maximize?e-80:Math.min(e/3,300))+"px;"},sizeStr:function(){return C(this.size)},localSizeStr:function(){return C(this.text.length)},active:function(){return this.eventSource&&this.eventSource.readyState<2}},methods:{appendLogMessage:function(e){if(this.size=e.size,e.message&&(this.text+=e.message,this.text.length>1e7&&(this.text=this.text.substr(-9e6))),this.autoScroll){var t=document.getElementById("logContent");setTimeout(function(){t.scrollTop=t.scrollHeight},100)}},viewLog:function(){var e=this,t=this.log;if(null!==this.eventSource&&(this.text="",this.size=0,this.eventSource.close()),t.visible){var s=new EventSource("/process/log/"+t.stream+"/tail/"+t.process.uid);s.onmessage=function(t){var s=JSON.parse(t.data);e.appendLogMessage(s)},s.onopen=function(s){console.debug(t.stream+" stream opened for "+e.log.process.uid)},s.onclose=function(t){e.eventSource=null},s.onerror=function(t){e.eventSource.close(),e.eventSource=null},this.eventSource=s}}}},G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-bottom-sheet",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("v-toolbar",{attrs:{dense:"",height:"32px",color:"err"===e.log.stream?"orange":"blue"}},[s("h5",[e._v(e._s(e.title))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-switch",{staticStyle:{height:"32px"},attrs:{slot:"activator",color:"indigo"},slot:"activator",model:{value:e.autoScroll,callback:function(t){e.autoScroll=t},expression:"autoScroll"}}),e._v(" "),s("span",[e._v("auto-scroll ("+e._s(e.autoScroll?"On":"Off")+")")])],1),e._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-chip",{attrs:{slot:"activator",color:"indigo white--text",dark:""},slot:"activator"},[e._v("\n        "+e._s(e.localSizeStr)+"\n        "),s("v-btn",{staticClass:"ml-0",attrs:{icon:"",small:"",left:""},on:{click:function(t){e.text=""}}},[s("v-icon",[e._v("delete")])],1)],1),e._v(" "),s("span",[e._v("Web console log size")])],1),e._v(" "),s("v-tooltip",{attrs:{bottom:""}},[s("v-chip",{staticClass:"indigo white--text",attrs:{slot:"activator",dark:""},slot:"activator"},[e._v("\n        "+e._s(e.sizeStr)+"\n      ")]),e._v(" "),s("span",[e._v("Remote log size")])],1),e._v(" "),s("v-btn",{staticClass:"mr-2",attrs:{icon:"",dark:"",small:""},on:{click:function(t){e.maximize=!e.maximize}}},[e.maximize?s("v-icon",[e._v("expand_more")]):s("v-icon",[e._v("expand_less")])],1)],1),e._v(" "),s("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:e.active,height:"1","background-color":"white",color:"deep-purple"}}),e._v(" "),s("v-card",[s("v-card-text",{staticClass:"scroll-y black white--text px-2 py-0",style:e.windowSize,attrs:{id:"logContent"}},[s("pre",{staticClass:"logConsole "},[e._v("        "+e._s(e.text)+"\n      ")])])],1)],1)},staticRenderFns:[]};var U=s("VU/8")(E,G,!1,function(e){s("Wugy")},"data-v-123145aa",null).exports,L={name:"ProcessDetails",data:function(){return{items:[{id:"name",label:"Name",color:"red"},{value:this.startTime,label:"Started at (last)",color:"red darken-2"},{id:"description",label:"Description",color:"orange"},{id:"host",label:"Host",color:"green"},{id:"supervisor",label:"Supervisor",color:"green darken-2"},{id:"pid",label:"PID",color:"blue"},{id:"exitstatus",label:"Exit status (last)",color:"blue darken-2"},{id:"logfile",label:"Output log file",color:"purple"},{id:"stderr_logfile",label:"Error log file",color:"purple darken-2"}]}},computed:{process:function(){return this.$store.state.processDetails.process},visible:{get:function(){return this.$store.state.processDetails.visible},set:function(e){this.$store.commit("setProcessDetailsVisible",e)}},lastUpdate:function(){return e=this.process.now,t={prefix:"",suffix:" ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},s=function(e,s){return t[e]&&t[e].replace(/%d/i,Math.abs(Math.round(s)))},o=new Date(1e3*e),r=.001*((new Date).getTime()-o)>>0,a=(c=(i=(n=r/60)/60)/24)/365,t.prefix+(r<45&&s("seconds",r)||r<90&&s("minute",1)||n<45&&s("minutes",n)||n<90&&s("hour",1)||i<24&&s("hours",i)||i<42&&s("day",1)||c<30&&s("days",c)||c<45&&s("month",1)||c<365&&s("months",c/30)||a<1.5&&s("year",1)||s("years",a))+t.suffix;var e,t,s,o,r,n,i,c,a}},methods:{startTime:function(){return Date(this.process.start)},showItem:function(e){return"value"in e||""!==this.process[e.id]},itemValue:function(e){return"id"in e?this.process[e.id]:e.value()}}},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-bottom-sheet",{attrs:{inset:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("v-card",[s("v-card-title",[e._v("Last updated "+e._s(e.lastUpdate))]),e._v(" "),s("v-list",{attrs:{dense:""}},[e._l(e.items,function(t,o){return[e.showItem(t)?s("v-list-tile",{key:t.id,attrs:{avatar:""}},[s("v-list-tile-avatar",{attrs:{color:t.color}},[s("span",{staticClass:"white--text headline"},[e._v(e._s(t.label[0]))])]),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(e.itemValue(t)))]),e._v(" "),s("v-list-tile-sub-title",[e._v(e._s(t.label))])],1)],1):e._e(),e._v(" "),o<e.items.length-2?s("v-divider",{attrs:{inset:""}}):e._e()]})],2)],1)],1)},staticRenderFns:[]},O=s("VU/8")(L,F,!1,null,null,null).exports,V={components:{ToolBar:w,LogSheet:U,ProcessDetails:O,NotificationBar:D}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("ToolBar"),this._v(" "),t("v-content",[t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("router-view")],1)],1),this._v(" "),t("NotificationBar"),this._v(" "),t("LogSheet"),this._v(" "),t("ProcessDetails")],1)},staticRenderFns:[]},M=s("VU/8")(V,T,!1,null,null,null).exports,z=s("gRE1"),A=s.n(z),I=s("Gu7T"),j=s.n(I),B=s("lHA8"),H=s.n(B);o.default.use(a.a);var W=new a.a.Store({state:{multivisor:{name:"Multivisor",supervisors:{}},notifications:[],selectedProcesses:[],search:"",log:{process:null,visible:!1,stream:"out"},processDetails:{process:{name:"",uid:"",pid:0,description:"",exitstatus:0,logfile:null,stderr_logfile:null,start:0,now:0},visible:!1}},mutations:{updateMultivisor:function(e,t){e.multivisor=t},updateProcess:function(e,t){e.multivisor.supervisors[t.supervisor].processes[t.uid]=t},updateSupervisor:function(e,t){e.multivisor.supervisors[t.name]=t},newNotification:function(e,t){e.notifications.push(t)},setLogVisible:function(e,t){e.log.visible=t},setLog:function(e,t){e.log=t},setSelectedProcesses:function(e,t){e.selectedProcesses=t},addSelectedProcesses:function(e,t){var s=new H.a([].concat(j()(e.selectedProcesses),j()(t)));e.selectedProcesses=[].concat(j()(s))},removeSelectedProcesses:function(e,t){var s=new H.a(t);e.selectedProcesses=e.selectedProcesses.filter(function(e){return!s.has(e)})},updateSearch:function(e,t){e.search=t},setProcessDetailsVisible:function(e,t){e.processDetails.visible=t},setProcessDetails:function(e,t){e.processDetails=t}},actions:{init:function(e){var t=e.commit;fetch("/data").then(function(e){return e.json()}).then(function(e){t("updateMultivisor",e);!function(e){var t=new EventSource("/stream");t.onmessage=function(t){var s=JSON.parse(t.data);e(s)}}(function(e){"process_changed"===e.event?t("updateProcess",e.payload):"supervisor_changed"===e.event?t("updateSupervisor",e.payload):"notification"===e.event&&t("newNotification",e.payload)})})},restartProcesses:function(e,t){$(t,"restart")},stopProcesses:function(e,t){$(t,"stop")},selectAll:function(){this.commit("setSelectedProcesses",[].concat(j()(this.getters.filteredProcessUIDs)))},clearSelected:function(){this.commit("setSelectedProcesses",[])},restartSelected:function(){var e=this;this.dispatch("restartProcesses",this.state.selectedProcesses).then(function(){e.dispatch("clearSelected")})},stopSelected:function(){var e=this;this.dispatch("stopProcesses",this.state.selectedProcesses).then(function(){e.dispatch("clearSelected")})},updateSupervisor:function(e,t){k(t,"update")},restartSupervisor:function(e,t){k(t,"restart")}},getters:{name:function(e){return e.multivisor.name},supervisors:function(e){return A()(e.multivisor.supervisors)},processes:function(e,t){return t.supervisors.reduce(function(e,t){return e.push.apply(e,j()(A()(t.processes))),e},[])},groupMap:function(e,t){return t.processes.reduce(function(e,t){return t.group in e&&e[t.group].processes.push(t)||(e[t.group]={name:t.group,processes:[t]}),e},{})},groups:function(e,t){return A()(t.groupMap)},supervisor:function(e){return function(t){return e.multivisor.supervisors[t]}},process:function(e,t){return function(e){return t.processes.find(function(t){return t.uid===e})}},group:function(e,t){return function(e){return t.groupMap[e]}},filteredProcessUIDs:function(e,t){if(!e.search)return new H.a(t.processes.map(function(e){return e.uid}));var s=e.search.toLowerCase();return t.processes.reduce(function(e,t){return-1===t.uid.toLowerCase().indexOf(s)&&-1===t.statename.toLowerCase().indexOf(s)||e.add(t.uid),e},new H.a)},filteredGroupMap:function(e,t){if(!e.search)return t.groups;var s=t.filteredProcessUIDs;return t.processes.reduce(function(e,t){return s.has(t.uid)&&(t.group in e&&e[t.group].processes.push(t)||(e[t.group]={name:t.group,processes:[t]})),e},{})},filteredGroups:function(e,t){return A()(t.filteredGroupMap)},totalNbProcesses:function(e,t){return t.processes.length},nbRunningProcesses:function(e,t){return t.processes.reduce(function(e,t){return t.running?e+1:e},0)},nbStoppedProcesses:function(e,t){return t.totalNbProcesses-t.nbRunningProcesses},totalNbSupervisors:function(e,t){return t.supervisors.length},nbRunningSupervisors:function(e,t){return t.supervisors.reduce(function(e,t){return t.running?e+1:e},0)},nbStoppedSupervisors:function(e,t){return t.totalNbSupervisors-t.nbRunningSupervisors},nbGroups:function(e,t){return t.groups.length}}}),K=s("/ocq"),J={name:"ProcessState",props:{state:{default:"UNKNOWN"},small:{default:!1}},data:function(){return{stateColorMap:x}}},Y={render:function(){var e=this.$createElement;return(this._self._c||e)("v-chip",{attrs:{disabled:"",label:"",color:this.stateColorMap[this.state],"text-color":"white",small:this.small}},[this._v("\n        "+this._s(this.state)+"\n")])},staticRenderFns:[]},q={name:"ProcessTitle",props:["process"],components:{ProcessState:s("VU/8")(J,Y,!1,null,null,null).exports},computed:{selectedProcesses:{get:function(){return this.$store.state.selectedProcesses},set:function(e){this.$store.commit("setSelectedProcesses",e)}}},methods:{restartProcess:function(e){this.$store.dispatch("restartProcesses",[e.uid])},stopProcess:function(e){this.$store.dispatch("stopProcesses",[e.uid])},viewLog:function(e,t){this.$store.commit("setLog",{process:e,stream:t,visible:!0})},viewDetails:function(e){this.$store.commit("setProcessDetails",{process:e,visible:!0})}}},X={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-list-tile",[s("v-list-tile-action",[s("v-checkbox",{attrs:{"hide-details":"",value:e.process.uid},model:{value:e.selectedProcesses,callback:function(t){e.selectedProcesses=t},expression:"selectedProcesses"}})],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e._v(e._s(e.process.name))])],1),e._v(" "),s("v-list-tile-action",[s("v-flex",{attrs:{"justify-end":""}},[s("ProcessState",{attrs:{state:e.process.statename}}),e._v(" "),s("v-btn",{attrs:{icon:""},on:{click:function(t){e.restartProcess(e.process)}}},[s("v-icon",{attrs:{color:"green"}},[e.process.running?[e._v("autorenew")]:[e._v("play_arrow")]],2)],1),e._v(" "),s("v-btn",{attrs:{icon:"",disabled:!e.process.running},on:{click:function(t){e.stopProcess(e.process)}}},[s("v-icon",{attrs:{color:"red"}},[e._v("stop")])],1),e._v(" "),s("v-menu",{attrs:{"open-on-hover":""}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:"",color:"blue--text"},slot:"activator"},[s("v-icon",[e._v("more_vert")])],1),e._v(" "),s("div",{staticClass:"grey lighten-3"},[s("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.viewDetails(e.process)}}},[s("v-icon",{attrs:{color:"blue"}},[e._v("info")])],1),e._v(" "),e.process.logfile?s("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.viewLog(e.process,"out")}}},[s("v-icon",{attrs:{color:"blue"}},[e._v("description")])],1):e._e(),e._v(" "),e.process.stderr_logfile?s("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.viewLog(e.process,"err")}}},[s("v-icon",{attrs:{color:"orange"}},[e._v("description")])],1):e._e()],1)],1)],1)],1)],1)},staticRenderFns:[]},Z=s("VU/8")(q,X,!1,null,null,null).exports,Q={name:"GroupList",props:["group"],components:{ProcessTile:Z}},ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("v-list",{attrs:{dense:""}},[this._l(this.group.processes,function(e){return[t("ProcessTile",{attrs:{process:e}})]})],2)],1)},staticRenderFns:[]},te={name:"GroupCard",props:["item"],components:{GroupList:s("VU/8")(Q,ee,!1,null,null,null).exports},computed:{group:function(){return this.item.item},selectedProcesses:function(){var e=this;return this.$store.state.selectedProcesses.reduce(function(t,s){return s.split(":",2)[1]===e.group.name&&t.push(s),t},[])}},methods:{restartSelected:function(){this.$store.dispatch("restartProcesses",this.selectedProcesses),this.clearSelected()},stopSelected:function(){this.$store.dispatch("stopProcesses",this.selectedProcesses),this.clearSelected()},selectAll:function(){var e=this.group.processes.reduce(function(e,t){return e.push(t.uid),e},[]);this.$store.commit("addSelectedProcesses",e)},clearSelected:function(){this.$store.commit("removeSelectedProcesses",this.selectedProcesses)}}},se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-toolbar",{attrs:{dense:"",color:"purple darken-2",dark:""}},[s("v-toolbar-title",[e._v(e._s(e.group.name))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.restartSelected()}},slot:"activator"},[s("v-icon",[e._v("autorenew")])],1),e._v(" "),s("span",[e._v("(Re)start selected processes")])],1),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.stopSelected()}},slot:"activator"},[s("v-icon",[e._v("stop")])],1),e._v(" "),s("span",[e._v("Stop selected processes")])],1),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.clearSelected()}},slot:"activator"},[s("v-icon",[e._v("clear_all")])],1),e._v(" "),s("span",[e._v("Clear selection")])],1),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length<e.group.processes.length,expression:"selectedProcesses.length < group.processes.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.selectAll()}},slot:"activator"},[s("v-icon",[e._v("done_all")])],1),e._v(" "),s("span",[e._v("Select all")])],1)],1),e._v(" "),s("GroupList",{attrs:{group:e.group}})],1)},staticRenderFns:[]},oe={name:"GroupPage",components:{GroupCard:s("VU/8")(te,se,!1,null,null,null).exports},computed:c()({},Object(a.c)({groups:"filteredGroups"}))},re={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-data-iterator",{attrs:{"content-tag":"v-layout",row:"",wrap:"","hide-actions":"","item-key":"name",items:this.groups,"no-results-text":"Sorry, no matching processes found","no-data-text":"Sorry, there are no processes currently being monitored"},scopedSlots:this._u([{key:"item",fn:function(e){return t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg4:"",xl3:""}},[t("GroupCard",{attrs:{item:e}})],1)}}])})],1)},staticRenderFns:[]},ne=s("VU/8")(oe,re,!1,null,null,null).exports,ie={name:"ProcessRow",props:["row","show-supervisor","show-group"],data:function(){return{stateColorMap:x}},computed:{process:function(){return this.row.item},selectedProcesses:{get:function(){return this.$store.state.selectedProcesses},set:function(e){this.$store.commit("setSelectedProcesses",e)}}},methods:{restartProcess:function(e){this.$store.dispatch("restartProcesses",[e.uid])},stopProcess:function(e){this.$store.dispatch("stopProcesses",[e.uid])},viewLog:function(e,t){this.$store.commit("setLog",{process:e,stream:t,visible:!0})},viewDetails:function(e){this.$store.commit("setProcessDetails",{process:e,visible:!0})}}},ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{staticClass:"px-0",staticStyle:{height:"30px"}},[s("v-checkbox",{attrs:{primary:"","hide-details":"",value:e.process.uid},model:{value:e.selectedProcesses,callback:function(t){e.selectedProcesses=t},expression:"selectedProcesses"}})],1),e._v(" "),s("td",{staticClass:"px-0",staticStyle:{height:"30px"}},[e._v("\n    "+e._s(e.process.name)+"\n  ")]),e._v(" "),e.showGroup?s("td",{staticClass:"hidden-xs-only px-0",staticStyle:{height:"30px"}},[e._v("\n      "+e._s(e.row.item.group)+"\n  ")]):e._e(),e._v(" "),e.showSupervisor?s("td",{staticClass:"hidden-xs-only px-0",staticStyle:{height:"30px"}},[e._v("\n    "+e._s(e.process.supervisor)+"\n  ")]):e._e(),e._v(" "),s("td",{staticClass:"px-0",staticStyle:{height:"30px"}},[s("v-chip",{attrs:{disabled:"",label:"",color:e.stateColorMap[e.process.statename],"text-color":"white",small:""}},[e._v("\n            "+e._s(e.process.statename)+"\n    ")])],1),e._v(" "),s("td",{staticClass:"layout px-0",staticStyle:{height:"30px"}},[s("v-btn",{staticClass:"mx-0 my-1",attrs:{icon:"",small:""},on:{click:function(t){e.restartProcess(e.process)}}},[s("v-icon",{attrs:{color:"green"}},[e.row.item.running?[e._v("autorenew")]:[e._v("play_arrow")]],2)],1),e._v(" "),s("v-btn",{staticClass:"mx-0 my-1",attrs:{icon:"",small:"",disabled:!e.row.item.running},on:{click:function(t){e.stopProcess(e.process)}}},[s("v-icon",{attrs:{color:"red"}},[e._v("stop")])],1),e._v(" "),s("v-menu",{attrs:{"open-on-hover":""}},[s("v-btn",{attrs:{slot:"activator",icon:"",small:"",color:"blue--text"},slot:"activator"},[s("v-icon",[e._v("more_vert")])],1),e._v(" "),s("div",{staticClass:"grey lighten-3"},[s("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.viewDetails(e.process)}}},[s("v-icon",{attrs:{color:"blue"}},[e._v("info")])],1),e._v(" "),e.process.logfile?s("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.viewLog(e.process,"out")}}},[s("v-icon",{attrs:{color:"blue"}},[e._v("description")])],1):e._e(),e._v(" "),e.process.stderr_logfile?s("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.viewLog(e.process,"err")}}},[s("v-icon",{attrs:{color:"orange"}},[e._v("description")])],1):e._e()],1)],1)],1)])},staticRenderFns:[]},ae={name:"ProcessPage",props:{processes:{default:null},showGroup:{default:!0},showSupervisor:{default:!0}},components:{ProcessRow:s("VU/8")(ie,ce,!1,null,null,null).exports,ProcessDetails:O},computed:{headers:function(){var e=[{align:"left",sortable:!0,text:"Name",value:"name",tooltip:"process name"}];return this.showGroup&&e.push({align:"left",sortable:!0,text:"Group",value:"group",tooltip:"process group",class:"hidden-xs-only"}),this.showSupervisor&&e.push({align:"left",sortable:!0,text:"Supervisor",value:"supervisor",tooltip:"supervisor controlling process",class:"hidden-xs-only"}),e.push({align:"left",sortable:!0,text:"State",value:"statename",tooltip:"process state"}),e.push({align:"left",sortable:!1,text:"Actions",value:"",tooltip:"(re)start/stop/view log"}),e},search:function(){return this.$store.state.search},selectedProcesses:{get:function(){return this.$store.state.selectedProcesses},set:function(e){this.$store.commit("setSelectedProcesses",e)}},procs:function(){return this.processes||this.$store.getters.processes}}},le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"justify-center":""}},[s("v-data-table",{staticClass:"elevation-4",attrs:{headers:e.headers,items:e.procs,search:e.search,"hide-actions":"","select-all":"","no-results-text":"Sorry, no matching processes found","no-data-text":"Sorry, there are no processes currently being monitored","must-sort":"","item-key":"uid"},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[s("v-tooltip",{attrs:{bottom:""}},[s("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n        "+e._s(t.header.text)+"\n      ")]),e._v(" "),s("span",[e._v("\n        "+e._s(t.header.tooltip)+"\n      ")])])]}},{key:"items",fn:function(t){return[s("ProcessRow",{attrs:{row:t,"show-supervisor":e.showSupervisor,"show-group":e.showGroup}})]}}]),model:{value:e.selectedProcesses,callback:function(t){e.selectedProcesses=t},expression:"selectedProcesses"}})],1)},staticRenderFns:[]},ue=s("VU/8")(ae,le,!1,null,null,null).exports,ve={name:"SupervisorList",props:["supervisor"],components:{ProcessTile:Z}},pe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.supervisor.groups,function(t,o){return s("v-list",{key:t.name,attrs:{subheader:"",dense:""}},[o>0?s("v-divider"):e._e(),e._v(" "),s("v-subheader",{staticStyle:{height:"24px"}},[e._v("\n      "+e._s(t.name)+"\n    ")]),e._v(" "),e._l(t.processes,function(e){return[s("ProcessTile",{attrs:{process:e}})]})],2)}),1)},staticRenderFns:[]},de={name:"SupervisorCard",props:["item"],components:{SupervisorList:s("VU/8")(ve,pe,!1,null,null,null).exports},computed:{supervisor:function(){return this.item.item},selectedProcesses:function(){var e=this;return this.$store.state.selectedProcesses.reduce(function(t,s){return s.split(":",1)[0]===e.supervisor.name&&t.push(s),t},[])}},methods:{updateSupervisor:function(){this.$store.dispatch("updateSupervisor",this.supervisor.name)},restartSupervisor:function(){this.$store.dispatch("restartSupervisor",this.supervisor.name)},restartSelectedProcesses:function(){this.$store.dispatch("restartProcesses",this.selectedProcesses),this.clearSelectedProcesses()},stopSelectedProcesses:function(){this.$store.dispatch("stopProcesses",this.selectedProcesses),this.clearSelectedProcesses()},selectAllProcesses:function(){var e=[];for(var t in this.supervisor.processes)e.push(this.supervisor.processes[t].uid);this.$store.commit("addSelectedProcesses",e)},clearSelectedProcesses:function(){this.$store.commit("removeSelectedProcesses",this.selectedProcesses)}}},he={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-toolbar",{attrs:{dense:"",color:"indigo",dark:""}},[s("v-toolbar-title",[e._v(e._s(e.supervisor.name))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.restartSelectedProcesses()}},slot:"activator"},[s("v-icon",[e._v("autorenew")])],1),e._v(" "),s("span",[e._v("(Re)start selected processes")])],1),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.stopSelectedProcesses()}},slot:"activator"},[s("v-icon",[e._v("stop")])],1),e._v(" "),s("span",[e._v("Stop selected processes")])],1),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length,expression:"selectedProcesses.length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.clearSelectedProcesses()}},slot:"activator"},[s("v-icon",[e._v("clear_all")])],1),e._v(" "),s("span",[e._v("Clear selection")])],1),e._v(" "),s("v-tooltip",{attrs:{top:""}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedProcesses.length<Object.keys(e.supervisor.processes).length,expression:"selectedProcesses.length < Object.keys(supervisor.processes).length"}],attrs:{slot:"activator",icon:"",small:""},on:{click:function(t){e.selectAllProcesses()}},slot:"activator"},[s("v-icon",[e._v("done_all")])],1),e._v(" "),s("span",[e._v("Select all")])],1),e._v(" "),s("v-menu",{attrs:{bottom:"",left:""}},[s("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[s("v-icon",[e._v("more_vert")])],1),e._v(" "),s("v-list",[s("v-list-tile",{on:{click:function(t){e.updateSupervisor()}}},[s("v-list-tile-title",[e._v("Update")])],1),e._v(" "),s("v-list-tile",{on:{click:function(t){e.restartSupervisor()}}},[s("v-list-tile-title",[e._v("Restart")])],1)],1)],1)],1),e._v(" "),s("SupervisorList",{attrs:{supervisor:e.supervisor}})],1)},staticRenderFns:[]},me={name:"SupervisorPage",components:{SupervisorCard:s("VU/8")(de,he,!1,null,null,null).exports},computed:{supervisorsGroups:function(){var e=this.$store.getters.supervisors,t=this.$store.getters.filteredProcessUIDs;return e.reduce(function(e,s){var o=A()(s.processes),r=A()(o.reduce(function(e,s){return t.has(s.uid)&&(s.group in e&&e[s.group].processes.push(s)||(e[s.group]={name:s.group,processes:[s]})),e},{}));return r.length&&e.push(c()({},s,{groups:r})),e},[])}}},fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("v-data-iterator",{attrs:{"content-tag":"v-layout",row:"",wrap:"","hide-actions":"","item-key":"name",items:this.supervisorsGroups,"no-results-text":"Sorry, no matching processes found","no-data-text":"Sorry, there are no processes currently being monitored"},scopedSlots:this._u([{key:"item",fn:function(e){return t("v-flex",{attrs:{xs12:"",sm12:"",md6:"",lg4:""}},[t("SupervisorCard",{attrs:{item:e}})],1)}}])})],1)},staticRenderFns:[]},_e=s("VU/8")(me,fe,!1,null,null,null).exports;o.default.use(K.a);var ge=new K.a({routes:[{path:"/",name:"Home",component:ne},{path:"/view/group",name:"GroupPage",component:ne},{path:"/view/supervisor",name:"SupervisorPage",component:_e},{path:"/view/process",name:"ProcessPage",component:ue}],mode:"history"});o.default.use(n.a),o.default.config.productionTip=!1,new o.default({el:"#app",store:W,router:ge,render:function(e){return e(M)},created:function(){this.$store.dispatch("init")}})},Wugy:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5a5958b9fca3f9c55621.js.map