<div class="row">
    <div class="col-sm-12">
    {% if version_diffs %}
        <p>Showing the last {{ version_diffs_limit }} versions.</p>
        {% for diff in version_diffs %}
        <div class="well">
            <div><em>Revision date:</em> {{ diff.date }}</div>
            <div><em>User:</em> {{ diff.user }}</div>
            {% if diff.diff_dict %}
            <table class="table table-striped table-hover version-diff">
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Old Value</th>
                        <th>New value</th>
                        <th>Diff</th>
                    </tr>
                </thead>
                <tbody>
                            {% for field, field_diff in diff.diff_dict.items %}
                    <tr>
                        <td class="fieldname">{{ field }}</td>
                        <td class="value">{% if field_diff.0 %}<pre>{{ field_diff.0|safe|linebreaks }}</pre>{% endif %}</td>
                        <td class="value">{% if field_diff.1 %}<pre>{{ field_diff.1|safe|linebreaks }}</pre>{% endif %}</td>
                        <td class="value">{% if field_diff.2 %}<pre>{{ field_diff.2|safe }}</pre>{% endif %}</td>
                    </tr>
                            {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div>No changes.</div>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>No previous version found.</p>
    {% endif %}
    </div>
</div>
