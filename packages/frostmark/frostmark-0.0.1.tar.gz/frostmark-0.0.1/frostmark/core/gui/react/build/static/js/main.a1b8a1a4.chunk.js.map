{"version":3,"sources":["FolderLabel.jsx","BookmarkLabel.jsx","BookmarkList.jsx","App.js","index.js"],"names":["FolderLabel","react_default","a","createElement","className","this","props","text","Component","BookmarkLabel","src","icon","alt","href","url","target","rel","createIconLabel","key","getHyperlink","BookmarkList","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","bookmarks","getBookmarks","_this2","fetch","mode","then","response","json","data","setState","item","folders","forEach","node_type","id","folder_name","children","parent_folder_id","title","folder_id","keys","hasOwnProperty","push","node","result","_this3","undefined","src_BookmarkLabel","length","react_treeview_default","nodeLabel","src_FolderLabel","map","child","traverse","processBookmarkTree","App","src_BookmarkList","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.a1b8a1a4.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\n\n/**\n * Custom react-treeview/TreeView nodeLabel property element.\n */\nclass FolderLabel extends Component {\n    render() {\n        return <span className=\"node\">{this.props.text}</span>;\n    }\n}\n\n\nexport default FolderLabel;\n","import React, { Component } from 'react';\n\n\n/**\n * Custom react-treeview/TreeView nodeLabel property element.\n */\nclass BookmarkLabel extends Component {\n    createIconLabel() {\n        return <span><img\n            // data:image/png;base64,encodedstring\n            src={this.props.icon}\n            alt={this.props.text}\n        /> {this.props.text}</span>;\n    }\n\n    getHyperlink() {\n        return <a\n            href={this.props.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n        >{\n            this.props.icon ? this.createIconLabel() : this.props.text\n        }</a>;\n    }\n\n    render() {\n        return <div\n            className='info'\n            key={'bookmark|' + this.props.text}\n        >{this.getHyperlink()}</div>\n    }\n}\n\n\nexport default BookmarkLabel;\n","import React, { Component } from 'react';\nimport fetch from 'node-fetch';\n\nimport TreeView from 'react-treeview';\nimport 'react-treeview/react-treeview.css';\nimport FolderLabel from './FolderLabel';\nimport BookmarkLabel from './BookmarkLabel';\n\n\n/**\n * Component rendering the full bookmark tree with nested, collapsable\n * folders and hyperlink bookmarks.\n */\nclass BookmarkList extends Component {\n    constructor() {\n        super();\n        this.className = \"frostmark-bookmark-list\";\n        this.state = { bookmarks: [] };\n    }\n\n    /**\n     * Get the required data during the component mounting.\n     */\n    componentWillMount() {\n        this.getBookmarks();\n    }\n\n    /**\n     * Fetch and store the data in the component state.\n     */\n    getBookmarks() {\n        fetch(\n            '/list_bookmarks',\n            { mode: \"cors\" }\n        ).then(response => response.json()).then(data => {\n            this.setState({ bookmarks: data });\n        });\n    }\n\n    /**\n     * Split bookmark tree into folders and bookmarks and nest them manually\n     * into TreeView (folder, nested folders) and its children.\n     */\n    processBookmarkTree() {\n        let folders = {};\n        let bookmarks = {};\n\n        this.state.bookmarks.forEach(item => {\n            if (item.node_type === 'Folder') {\n                folders[item.id] = {\n                    id: item.id,\n                    folder_name: item.folder_name,\n                    children: [],\n                    parent_folder_id: item.parent_folder_id,\n                    node_type: item.node_type\n                };\n            } else if (item.node_type === 'Bookmark') {\n                bookmarks[item.id] = {\n                    id: item.id,\n                    title: item.title,\n                    url: item.url,\n                    folder_id: item.folder_id,\n                    node_type: item.node_type,\n                    icon: item.icon\n                };\n            }\n        });\n\n        let item;\n        Object.keys(bookmarks).forEach(key => {\n            item = bookmarks[key];\n            if (folders.hasOwnProperty(item.folder_id)) {\n                folders[item.folder_id].children.push(item);\n            }\n        });\n\n        Object.keys(folders).forEach(key => {\n            item = folders[key];\n            if (folders.hasOwnProperty(item.parent_folder_id)) {\n                if (item.parent_folder_id !== null) {\n                    folders[item.parent_folder_id].children.push(item);\n                }\n            }\n        });\n\n        return folders[0];\n    }\n\n    traverse(node) {\n        let result;\n        if (node === undefined) {\n            return <BookmarkLabel text=\"No data found.\" />;\n        }\n        if (node.node_type === 'Folder') {\n            if (!node.children.length) {\n                result = (\n                    <TreeView\n                        key={'folder|' + node.folder_name}\n                        nodeLabel={\n                            <FolderLabel text={node.folder_name}></FolderLabel>\n                        }\n                    />\n                );\n            } else {\n                result = (\n                    <TreeView\n                        key={'folder|' + node.folder_name}\n                        nodeLabel={\n                            <FolderLabel text={node.folder_name}></FolderLabel>\n                        }\n                    >\n                        {node.children.map(child => this.traverse(child))}\n                    </TreeView>\n                );\n            }\n        } else if (node.node_type === 'Bookmark') {\n            result = <BookmarkLabel\n                url={node.url}\n                icon={node.icon}\n                text={node.title}\n            />;\n        }\n        return result;\n    }\n\n    render() {\n        return <div className={this.className}>\n            {this.traverse(this.processBookmarkTree())}\n        </div>;\n    }\n}\n\n\nexport default BookmarkList;\n","/**\n * Main application entrypoint assembling all other components.\n */\nimport React, { Component } from 'react';\nimport './App.css';\nimport BookmarkList from './BookmarkList';\n\n\n/**\n * Application class included in the index.js/index.html.\n */\nclass App extends Component {\n\n    /**\n     * Render all the components.\n     */\n    render() {\n        return (\n            <div className=\"App\">\n                <BookmarkList />\n            </div>\n        );\n    }\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}