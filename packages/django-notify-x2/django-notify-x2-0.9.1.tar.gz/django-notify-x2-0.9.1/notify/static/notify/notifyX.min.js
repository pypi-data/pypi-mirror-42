var updateNotificationUrl;var markNotificationUrl;var markReadNotificationUrl;var markUnreadNotificationUrl;var markAllNotificationUrl;var deleteNotificationUrl;var nfListClassSelector;var nfReadOnlyListClassSelector;var nfUnreadOnlyListClassSelector;var nfClassSelector;var nfBoxListClassSelector;var nfBoxClassSelector;var nfListSelector=nfBoxListClassSelector+", "+nfListClassSelector;var nfSelector=nfClassSelector+", "+nfBoxClassSelector;var markNotificationSelector;var markAllNotificationSelector;var deleteNotificationSelector;var markLinkNotificationSelector;var readNotificationClass;var unreadNotificationClass;var markSuccess;var markAllSuccess;var deleteSuccess;var updateSuccess;var notificationUpdateTimeInterval;function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}var csrftoken=getCookie("csrftoken");function csrfSafeMethod(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)}function sameOrigin(url){var host=document.location.host;var protocol=document.location.protocol;var sr_origin="//"+host;var origin=protocol+sr_origin;return url==origin||url.slice(0,origin.length+1)==origin+"/"||(url==sr_origin||url.slice(0,sr_origin.length+1)==sr_origin+"/")||!/^(\/\/|http:|https:).*/.test(url)}$.ajaxSetup({beforeSend:function(xhr,settings){if(!csrfSafeMethod(settings.type)&&sameOrigin(settings.url)){xhr.setRequestHeader("X-CSRFToken",csrftoken)}}});$(document).ready(function(){$(nfListSelector).delegate(markNotificationSelector,"click",function(){var $notification=$(this);var mark_action=$notification.attr("data-mark-action");var mark_post_data={id:$notification.attr("data-id"),action:mark_action,csrftoken:csrftoken};$.ajax({type:"POST",url:markNotificationUrl,data:mark_post_data,success:function(response){markSuccess(response,$notification)}})})});$(document).ready(function(){$(nfReadOnlyListClassSelector).delegate(markNotificationSelector,"click",function(){var $notification=$(this);var mark_post_data={id:$notification.attr("data-id"),csrftoken:csrftoken};$.ajax({type:"POST",url:markReadNotificationUrl,data:mark_post_data,success:function(response){markReadSuccess(response,$notification)}})})});$(document).ready(function(){$(nfUnreadOnlyListClassSelector).delegate(markNotificationSelector,"click",function(){var $notification=$(this);var mark_post_data={id:$notification.attr("data-id"),csrftoken:csrftoken};$.ajax({type:"POST",url:markUnreadNotificationUrl,data:mark_post_data,success:function(response){markUnreadSuccess(response,$notification)}})})});$(document).ready(function(){$(markAllNotificationSelector).on("click",function(){var mark_all_post_data={action:$(this).attr("data-mark-action"),csrftoken:csrftoken};$.ajax({type:"POST",url:markAllNotificationUrl,data:mark_all_post_data,success:function(response){markAllSuccess(response)}})})});$(document).ready(function(){var deleteAjax=function(){var $notification=$(this);var delete_notification_data={id:$notification.attr("data-id"),csrftoken:csrftoken};$.ajax({type:"POST",url:deleteNotificationUrl,data:delete_notification_data,success:function(response){deleteSuccess(response,$notification)}})};$(nfListSelector).delegate(deleteNotificationSelector,"click",deleteAjax);$(nfReadOnlyListClassSelector).delegate(deleteNotificationSelector,"click",deleteAjax);$(nfUnreadOnlyListClassSelector).delegate(deleteNotificationSelector,"click",deleteAjax)});$(document).ready(function updateNotifications(){var $notification_box=$(nfBoxListClassSelector);var flag=$notification_box.children().first().attr("data-nf-id")||"1";if(!flag||$notification_box.length==0){return}$.ajax({type:"GET",url:updateNotificationUrl+"?flag="+flag,success:function(response){updateSuccess(response)},complete:function(){setTimeout(updateNotifications,notificationUpdateTimeInterval)}})});